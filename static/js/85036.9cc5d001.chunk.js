"use strict";(globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).push([[85036],{22657:(e,t,n)=>{n.d(t,{m:()=>o});var s=n(53573),i=n(49639);function o(e){const t=s.Z.parse(e);for(const[n,s]of Object.entries(t))(0,i.isArray)(s)?t[n]=s.join(","):null===s&&delete t[n];return t}},85036:(e,t,n)=>{n.r(t),n.d(t,{Component:()=>We,default:()=>Xe,handleHash:()=>qe});var s=n(37305),i=n(53424),o=n(54519),r=n(65675),a=n(41418),l=n.n(a),d=n(763),c=n(4235),u=n(72791),h=n(37325),p=n(78687),m=n(57689),g=n(53693),b=n(71594),v=n(17498),x=n(35147),S=n(3515),y=n(96833),C=n(60341),E=n(1309),j=n(90362),f=n(13152),L=n(89702),I=n(99439),w=n(35772),k=n(5136),F=n(95134),D=n(32881),T=n(60363),N=n(60054),R=n(89360),_=n(27156),O=n(32183),P=n(11294),A=n(3047),M=n(80184);const V=e=>(0,M.jsx)(A.u,{content:"Execution Time",placement:O.Ly.TOP,children:(0,M.jsx)(P.A,{leftIcon:i.d.TIME,style:{width:80},min:1e3,value:e.execTime,onValueChange:e.handleChangeExecTime})});var U=n(50698),B=n(79037),H=n(68066),G=n(17862);const Z={INACTIVE:U.S.NONE,SAVED:U.S.PRIMARY,DIRTY:U.S.WARNING},z=e=>{const{isMobileBreakpoint:t}=(0,j.Fs)(),n=e.currentFile?e.isDirty?"DIRTY":"SAVED":"INACTIVE",o=(0,M.jsx)(G.Z,{label:e.currentFile&&e.currentFile.name||"Google Drive",icon:i.d.CLOUD,options:{intent:Z[n]},isDisabled:e.isFolderModeEnabled}),r=(0,M.jsx)(G.Z,{label:"Open",icon:i.d.DOCUMENT_OPEN,onClick:e.onClickOpen}),a=(0,M.jsx)(G.Z,{label:"Save",icon:i.d.FLOPPY_DISK,onClick:e.onClickSave,isDisabled:"INACTIVE"===n}),l=(0,M.jsx)(G.Z,{label:"Save as",icon:i.d.SEND_TO,onClick:e.onClickSaveAs}),d=e.loggedInAs&&(0,M.jsx)(A.u,{content:`Logged in as ${e.loggedInAs}`,children:(0,M.jsx)(G.Z,{label:"Log out",icon:i.d.LOG_OUT,onClick:e.onClickLogOut})}),c=e.isFolderModeEnabled?"Currently unsupported in Folder mode":void 0;return(0,M.jsx)(A.u,{content:c,disabled:void 0===c,children:(0,M.jsx)(H.p,{autoFocus:!1,content:(0,M.jsx)("div",{children:(0,M.jsxs)(B.h,{large:!t,children:[r,a,l,d]})}),onOpening:e.onPopoverOpening,popoverClassName:s.POPOVER_DISMISS,disabled:e.isFolderModeEnabled,children:o})})};var Y=n(44805),$=n(722),K=n(78029),q=n(33508),J=n(44439);function W(e){(0,J.N9)(`Could not connect: ${e&&e.message||e||"Unknown error"}`)}class X extends u.PureComponent{constructor(e){super(e),this.state={joinElemValue:""},this.handleChange=this.handleChange.bind(this),this.inviteInputElem=u.createRef(),this.selectInviteInputText=this.selectInviteInputText.bind(this)}render(){const e=(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("input",{value:this.props.editorSessionId,readOnly:!0,ref:this.inviteInputElem}),(0,M.jsx)(K,{text:""+this.props.editorSessionId,children:(0,M.jsx)(G.Z,{icon:i.d.DUPLICATE,onClick:this.selectInviteInputText})})]}),t=(0,M.jsx)(H.p,{popoverClassName:"Popover-share",inheritDarkTheme:!1,content:e,children:(0,M.jsx)(G.Z,{label:"Invite",icon:i.d.GRAPH,onClick:()=>{""===this.props.editorSessionId&&(0,q.lW)(this.props.getEditorValue()).then((e=>{this.props.handleSetEditorSessionId(e)}),W)}})}),n=(0,M.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(0,q.Ht)(this.state.joinElemValue).then((e=>{e?this.props.handleSetEditorSessionId(this.state.joinElemValue):(this.props.handleSetEditorSessionId(""),(0,J.N9)("Could not find a session with that ID."))}),(e=>{this.props.handleSetEditorSessionId(""),W(e)}))},children:[(0,M.jsx)("input",{type:"text",value:this.state.joinElemValue,onChange:this.handleChange}),(0,M.jsx)("span",{className:s.POPOVER_DISMISS,children:(0,M.jsx)(G.Z,{icon:i.d.KEY_ENTER,options:{type:"submit"}})})]}),o=(0,M.jsx)(H.p,{popoverClassName:"Popover-share",inheritDarkTheme:!1,content:n,children:(0,M.jsx)(G.Z,{label:"Join",icon:i.d.LOG_IN})}),r=(0,M.jsx)(G.Z,{label:"Leave",icon:i.d.FEED,onClick:()=>{this.props.handleSetEditorSessionId(""),this.setState({joinElemValue:""})}}),a=this.props.isFolderModeEnabled?"Currently unsupported in Folder mode":void 0;return(0,M.jsx)(A.u,{content:a,disabled:void 0===a,children:(0,M.jsx)(H.p,{content:(0,M.jsxs)(Y.v,{large:!0,children:[t,""===this.props.editorSessionId?o:r]}),disabled:this.props.isFolderModeEnabled,children:(0,M.jsx)(G.Z,{label:"Session",icon:i.d.SOCIAL_MEDIA,options:{iconColor:""===this.props.editorSessionId?void 0:this.props.sharedbConnected?$.w.GREEN3:$.w.RED3},isDisabled:this.props.isFolderModeEnabled})})})}selectInviteInputText(){null!==this.inviteInputElem.current&&(this.inviteInputElem.current.focus(),this.inviteInputElem.current.select())}handleChange(e){this.setState({joinElemValue:e.target.value})}}var Q=n(51002),ee=n(16499),te=n(14634),ne=n(9631);class se extends u.PureComponent{constructor(e){super(e),this.selectShareInputText=this.selectShareInputText.bind(this),this.handleChange=this.handleChange.bind(this),this.toggleButton=this.toggleButton.bind(this),this.shareInputElem=u.createRef(),this.state={keyword:"",isLoading:!1}}render(){const e=void 0===this.props.queryString?(0,M.jsx)(Q.x,{children:"Share your programs! Type something into the editor (left), then click on this button again."}):this.props.isSicp?(0,M.jsxs)("div",{children:[(0,M.jsx)("input",{defaultValue:this.props.queryString,readOnly:!0,ref:this.shareInputElem}),(0,M.jsx)(A.u,{content:"Copy link to clipboard",children:(0,M.jsx)(K,{text:this.props.queryString,children:(0,M.jsx)(G.Z,{icon:i.d.DUPLICATE,onClick:this.selectShareInputText})})})]}):(0,M.jsx)(M.Fragment,{children:this.props.shortURL&&"ERROR"!==this.props.shortURL?(0,M.jsxs)("div",{children:[(0,M.jsx)("input",{defaultValue:this.props.shortURL,readOnly:!0,ref:this.shareInputElem}),(0,M.jsx)(A.u,{content:"Copy link to clipboard",children:(0,M.jsx)(K,{text:this.props.shortURL,children:(0,M.jsx)(G.Z,{icon:i.d.DUPLICATE,onClick:this.selectShareInputText})})})]},this.props.shortURL):this.state.isLoading&&"ERROR"!==this.props.shortURL?(0,M.jsx)("div",{children:(0,M.jsx)(ee.t,{description:"Generating Shareable Link...",icon:(0,M.jsx)(te.$,{size:te.E.SMALL})})}):(0,M.jsxs)("div",{children:[ne.Z.urlShortenerBase,"\xa0",(0,M.jsx)("input",{placeholder:"custom string (optional)",onChange:this.handleChange,style:{width:175}}),(0,M.jsx)(G.Z,{label:"Get Link",icon:i.d.SHARE,onClick:()=>{this.props.handleShortenURL(this.state.keyword),this.setState({isLoading:!0})}})]})});return(0,M.jsx)(H.p,{popoverClassName:"Popover-share",inheritDarkTheme:!1,content:e,children:(0,M.jsx)(A.u,{content:"Get shareable link",placement:O.Ly.TOP,children:(0,M.jsx)(G.Z,{label:"Share",icon:i.d.SHARE,onClick:()=>this.toggleButton()})})})}componentDidUpdate(e){this.props.shortURL!==e.shortURL&&this.setState({keyword:"",isLoading:!1})}toggleButton(){this.props.handleGenerateLz&&this.props.handleGenerateLz(),this.props.handleUpdateShortURL(""),this.setState({keyword:"",isLoading:!1})}handleChange(e){this.setState({keyword:e.currentTarget.value})}selectShareInputText(){null!==this.shareInputElem.current&&(this.shareInputElem.current.focus(),this.shareInputElem.current.select())}}const ie=e=>(0,M.jsx)(A.u,{content:"Step Limit",placement:O.Ly.TOP,children:(0,M.jsx)(P.A,{leftIcon:i.d.VERTICAL_BAR_CHART_ASC,style:{width:80},min:500,max:5e3,value:e.stepLimit,stepSize:e.stepSize,onBlur:()=>{var t;null===(t=e.handleOnBlurAutoScale)||void 0===t||t.call(e,Number(e.stepLimit))},onValueChange:e.handleChangeStepLimit})}),oe=({isFolderModeEnabled:e,isSessionActive:t,isPersistenceActive:n,toggleFolderMode:s})=>{const o=t?"Currently unsupported while a collaborative session is active":n?"Currently unsupported while a persistence method is active":(e?"Disable":"Enable")+" Folder mode";return(0,M.jsx)(A.u,{content:o,children:(0,M.jsx)(G.Z,{label:"Folder",icon:i.d.FOLDER_CLOSE,options:{iconColor:e?$.w.BLUE4:void 0},onClick:s,isDisabled:t||n})})},re=e=>{const{isMobileBreakpoint:t}=(0,j.Fs)(),n=e.githubSaveInfo.filePath||"",o=(n.split("\\").pop()||"").split("/").pop()||"",r=void 0!==e.loggedInAs,a=!r,l=r&&""!==n,d=l?o:"GitHub";let c=U.S.NONE;l&&(c=e.isDirty?U.S.WARNING:U.S.PRIMARY);const u=(0,M.jsx)(G.Z,{label:d,icon:i.d.GIT_BRANCH,options:{intent:c},isDisabled:e.isFolderModeEnabled}),h=(0,M.jsx)(G.Z,{label:"Open",icon:i.d.DOCUMENT_OPEN,onClick:e.onClickOpen,isDisabled:a}),p=(0,M.jsx)(G.Z,{label:"Save",icon:i.d.FLOPPY_DISK,onClick:e.onClickSave,isDisabled:a||!l}),m=(0,M.jsx)(G.Z,{label:"Save As",icon:i.d.SEND_TO,onClick:e.onClickSaveAs,isDisabled:a}),g=r?(0,M.jsx)(G.Z,{label:"Log Out",icon:i.d.LOG_OUT,onClick:e.onClickLogOut}):(0,M.jsx)(G.Z,{label:"Log In",icon:i.d.LOG_IN,onClick:e.onClickLogIn}),b=e.isFolderModeEnabled?"Currently unsupported in Folder mode":void 0;return(0,M.jsx)(A.u,{content:b,disabled:void 0===b,children:(0,M.jsx)(H.p,{autoFocus:!1,content:(0,M.jsx)("div",{children:(0,M.jsxs)(B.h,{large:!t,children:[h,p,m,g]})}),popoverClassName:s.POPOVER_DISMISS,disabled:e.isFolderModeEnabled,children:u})})};var ae=n(19832),le=n(27448),de=n(28680),ce=n(67643),ue=n.n(ce);const he="FileSystemView_file-system-view-container__jISZG",pe="FileSystemView_file-system-view-error__SrF6Z",me="FileSystemView_file-system-view-empty-space__KfVv+",ge="FileSystemView_file-system-view-list-container__9O+ym",be="FileSystemView_file-system-view-spinner__YBPGb",ve="FileSystemView_file-system-view-directory-node-container__ya2Av",xe="FileSystemView_file-system-view-node-container__GN6ql",Se="FileSystemView_file-system-view-input__r+WEl",ye="FileSystemView_file-system-view-file-name__-PCmg";var Ce=n(79637),Ee=n(83236),je=n(63882),fe=n(23797);const Le="ContextMenu_context-menu__FXXlu",Ie="ContextMenu_context-menu-item__c2H+Q",we=e=>{const{children:t,className:n,createNewFile:i,createNewDirectory:o,open:r,rename:a,remove:d}=e,[c,h]=(0,Ee.w)(),[p,m]=u.useState({x:0,y:0});return(0,M.jsxs)("div",{className:n,onContextMenu:e=>{e.preventDefault(),m({x:e.clientX,y:e.clientY}),h(!0)},children:[t,(0,M.jsxs)(je.B,{menuClassName:l()(s.CARD,s.DARK,Le),...c,anchorPoint:p,onClose:()=>h(!1),children:[i&&(0,M.jsx)(fe.s,{className:Ie,onClick:i,children:"New File"}),o&&(0,M.jsx)(fe.s,{className:Ie,onClick:o,children:"New Directory"}),r&&(0,M.jsx)(fe.s,{className:Ie,onClick:r,children:"Open"}),a&&(0,M.jsx)(fe.s,{className:Ie,onClick:a,children:"Rename"}),d&&(0,M.jsx)(fe.s,{className:Ie,onClick:d,children:"Delete"})]})]})},ke=e=>{const{indentationLevel:t}=e,n={paddingLeft:19*t+"px"};return(0,M.jsx)("div",{style:n})},Fe=e=>{const{children:t,waitInMsBeforeRender:n}=e,[s,i]=u.useState(!1);return u.useEffect((()=>{const e=setTimeout((()=>i(!0)),n);return()=>clearTimeout(e)}),[n]),s?t:(0,M.jsx)(M.Fragment,{})},De=e=>{const{workspaceLocation:t,fileSystem:n,basePath:s,fileName:i,isDirectory:o,isEditing:r,setIsEditing:a,refreshDirectory:l}=e,[d,c]=u.useState(i),h=(0,p.I0)(),m=()=>{a(!1),c(i)};return(0,M.jsxs)(M.Fragment,{children:[r&&(0,M.jsx)("input",{type:"text",autoFocus:!0,spellCheck:!1,className:Se,value:d,onChange:e=>c(e.target.value),onKeyDown:e=>{if("Enter"===e.key){a(!1);const e=ue().join(s,i),r=ue().join(s,d);if(e===r)return;n.exists(r,(s=>{s?(0,Ce.qY)({title:"Unable to rename "+(o?"directory":"file"),contents:(0,M.jsxs)("p",{children:["A file or folder ",(0,M.jsx)("b",{children:d})," already exists in this location. Please choose a different name."]}),label:"OK"}).then((()=>c(i))):n.rename(e,r,(n=>{n&&console.error(n),h(o?(0,L.renameEditorTabsForDirectory)(t,e,r):(0,L.renameEditorTabForFile)(t,e,r)),l()}))}))}else"Escape"===e.key&&m()},onFocus:e=>{const t=e.target.value.lastIndexOf(".");-1!==t?e.target.setSelectionRange(0,t):e.target.select()},onBlur:m}),!r&&(0,M.jsx)("div",{className:ye,children:i})]})},Te=e=>{const{processFileName:t,removePlaceholder:n}=e,[s,i]=u.useState(""),o=()=>n();return(0,M.jsx)("input",{type:"text",autoFocus:!0,spellCheck:!1,className:Se,value:s,onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"===e.key?(t(s),n()):"Escape"===e.key&&o()},onBlur:o})},Ne=e=>{const{workspaceLocation:t,fileSystem:n,basePath:s,directoryName:o,indentationLevel:r,refreshParentDirectory:a}=e,l=ue().join(s,o),[d,c]=u.useState(!1),[h,m]=u.useState(!1),[g,b]=u.useState(!1),[v,x]=u.useState(!1),[S,y]=u.useState(0),C=(0,p.I0)(),E=()=>y((S+1)%2);return(0,M.jsxs)("div",{className:ve,children:[(0,M.jsx)(we,{createNewFile:()=>{c(!0),b(!0)},createNewDirectory:()=>{c(!0),x(!0)},rename:()=>m(!0),remove:()=>{(0,Ce.pG)({icon:"warning-sign",title:`Are you sure you want to delete '${o}' and its contents?`,contents:(0,M.jsxs)("p",{children:["This will result in all of its contained files & subdirectories being deleted. Once a directory is deleted, its contents cannot be recovered!",(0,M.jsx)("br",{}),(0,M.jsx)("br",{}),(0,M.jsx)("strong",{children:"Do you still want to proceed?"})]}),positiveIntent:"danger",positiveLabel:"Proceed",negativeLabel:"Cancel"}).then((e=>{e&&(C((0,L.removeEditorTabsForDirectory)(t,l)),(0,le.EY)(n,l).then(a))}))},children:(0,M.jsxs)("div",{className:xe,onClick:()=>{h||c(!d)},children:[(0,M.jsx)(ke,{indentationLevel:r}),d&&(0,M.jsx)(de.I,{icon:i.d.CHEVRON_DOWN}),!d&&(0,M.jsx)(de.I,{icon:i.d.CHEVRON_RIGHT}),(0,M.jsx)(De,{workspaceLocation:t,fileSystem:n,basePath:s,fileName:o,isDirectory:!0,isEditing:h,setIsEditing:m,refreshDirectory:a})]})}),g&&(0,M.jsxs)("div",{className:xe,children:[(0,M.jsx)(ke,{indentationLevel:r+1}),(0,M.jsx)(de.I,{icon:i.d.DOCUMENT}),(0,M.jsx)(Te,{processFileName:e=>{const t=ue().join(s,o,e);n.exists(t,(s=>{s?(0,Ce.qY)({title:"Unable to create file",contents:(0,M.jsxs)("p",{children:["A file or folder ",(0,M.jsx)("b",{children:e})," already exists in this location. Please choose a different name."]}),label:"OK"}).then((()=>{})):n.writeFile(t,"",(e=>{e&&console.error(e),E()}))}))},removePlaceholder:()=>b(!1)})]}),v&&(0,M.jsxs)("div",{className:xe,children:[(0,M.jsx)(ke,{indentationLevel:r+1}),(0,M.jsx)(de.I,{icon:i.d.CHEVRON_RIGHT}),(0,M.jsx)(Te,{processFileName:e=>{const t=ue().join(s,o,e);n.exists(t,(s=>{s?(0,Ce.qY)({title:"Unable to create directory",contents:(0,M.jsxs)("p",{children:["A file or folder ",(0,M.jsx)("b",{children:e})," already exists in this location. Please choose a different name."]}),label:"OK"}).then((()=>{})):n.mkdir(t,777,(e=>{e&&console.error(e),E()}))}))},removePlaceholder:()=>x(!1)})]}),d&&(0,M.jsx)(_e,{workspaceLocation:t,fileSystem:n,basePath:l,indentationLevel:r+1},S)]})},Re=e=>{const{workspaceLocation:t,fileSystem:n,basePath:s,fileName:o,indentationLevel:r,refreshDirectory:a}=e,[l,d]=u.useState(!1),c=(0,p.I0)(),h=ue().join(s,o),m=()=>{n.readFile(h,"utf-8",((e,n)=>{if(e&&console.error(e),void 0===n)throw new Error("File contents are undefined.");c((0,L.addEditorTab)(t,h,n))}))};return(0,M.jsx)(we,{open:m,rename:()=>d(!0),remove:()=>{(0,Ce.pG)({icon:"warning-sign",title:`Are you sure you want to delete '${o}'?`,contents:(0,M.jsxs)("p",{children:["Once a file is deleted, it cannot be recovered!",(0,M.jsx)("br",{}),(0,M.jsx)("br",{}),(0,M.jsx)("strong",{children:"Do you still want to proceed?"})]}),positiveIntent:"danger",positiveLabel:"Proceed",negativeLabel:"Cancel"}).then((e=>{e&&n.unlink(h,(e=>{e&&console.error(e),c((0,L.removeEditorTabForFile)(t,h)),a()}))}))},children:(0,M.jsxs)("div",{className:xe,onClick:e=>{2===e.detail&&m()},children:[(0,M.jsx)(ke,{indentationLevel:r}),(0,M.jsx)(de.I,{icon:i.d.DOCUMENT}),(0,M.jsx)(De,{workspaceLocation:t,fileSystem:n,basePath:s,fileName:o,isDirectory:!1,isEditing:l,setIsEditing:d,refreshDirectory:a})]})})},_e=e=>{const{workspaceLocation:t,fileSystem:n,basePath:s,indentationLevel:i}=e,[o,r]=u.useState(void 0),[a,l]=u.useState(void 0),d=()=>{n.readdir(s,(async(e,t)=>{if(e&&console.error(e),void 0===t)return;const i=[],o=[];await Promise.all(t.map((e=>{const t=ue().join(s,e);return new Promise(((s,r)=>{n.lstat(t,((t,n)=>{if(t)return r(t);void 0!==n&&(n.isFile()?i.push(e):n.isDirectory()&&o.push(e),s(n))}))}))}))),l(i.sort()),r(o.sort())}))};return u.useEffect(d,[n,s]),a&&o?(0,M.jsxs)("div",{className:ge,children:[o.map((e=>(0,M.jsx)(Ne,{workspaceLocation:t,fileSystem:n,basePath:s,directoryName:e,indentationLevel:i,refreshParentDirectory:d},e))),a.map((e=>(0,M.jsx)(Re,{workspaceLocation:t,fileSystem:n,basePath:s,fileName:e,indentationLevel:i,refreshDirectory:d},e)))]}):(0,M.jsx)(Fe,{waitInMsBeforeRender:200,children:(0,M.jsx)(te.$,{className:be,size:te.E.SMALL})})},Oe=e=>{const{workspaceLocation:t,basePath:n}=e,s=(0,j.ix)((e=>e.fileSystem.inBrowserFileSystem)),[o,r]=u.useState(!1),[a,l]=u.useState(!1),[d,c]=u.useState(0),h=()=>c((d+1)%2);if(null===s)return(0,M.jsx)("div",{className:pe,children:"Unable to load file system."});return(0,M.jsxs)("div",{className:he,children:[(0,M.jsx)(_e,{workspaceLocation:t,fileSystem:s,basePath:n,indentationLevel:0},d),o&&(0,M.jsxs)("div",{className:xe,children:[(0,M.jsx)(ke,{indentationLevel:0}),(0,M.jsx)(de.I,{icon:i.d.DOCUMENT}),(0,M.jsx)(Te,{processFileName:e=>{const t=ue().join(n,e);s.exists(t,(n=>{n?(0,Ce.qY)({title:"Unable to create file",contents:(0,M.jsxs)("p",{children:["A file or folder ",(0,M.jsx)("b",{children:e})," already exists in this location. Please choose a different name."]}),label:"OK"}).then((()=>{})):s.writeFile(t,"",(e=>{e&&console.error(e),h()}))}))},removePlaceholder:()=>r(!1)})]}),a&&(0,M.jsxs)("div",{className:xe,children:[(0,M.jsx)(ke,{indentationLevel:0}),(0,M.jsx)(de.I,{icon:i.d.CHEVRON_RIGHT}),(0,M.jsx)(Te,{processFileName:e=>{const t=ue().join(n,e);s.exists(t,(n=>{n?(0,Ce.qY)({title:"Unable to create directory",contents:(0,M.jsxs)("p",{children:["A file or folder ",(0,M.jsx)("b",{children:e})," already exists in this location. Please choose a different name."]}),label:"OK"}).then((()=>{})):s.mkdir(t,777,(e=>{e&&console.error(e),h()}))}))},removePlaceholder:()=>l(!1)})]}),(0,M.jsx)(we,{className:me,createNewFile:()=>r(!0),createNewDirectory:()=>l(!0)})]})};var Pe=n(45686),Ae=n(39215);const Me=`\nWelcome to the Source Academy playground!\n\nThe book [_Structure and Interpretation of Computer Programs, JavaScript Edition_](${ne.y.textbook})\nuses JavaScript sublanguages that we call [_Source_](${ne.y.sourceDocs}). `,Ve=`\n\nIn the editor on the left, you can use the [_Ace keyboard shortcuts_](${ne.y.aceHotkeys}) \nand also the [_Source Academy keyboard shortcuts_](${ne.y.sourceHotkeys}).\n\n`,Ue=(e,t)=>Me+((e,t)=>{if(e===o.Chapter.FULL_JS)return`However, you have chosen full JavaScript; your program will be run directly using JavaScript strict mode [_(ECMAScript 2021)_](${ne.y.ecmaScript_2021}).\n\n<b>Warning:</b> If your program freezes during execution, you can try refreshing the tab. Note that you need to open the browser console (typically by pressing \`F12\`) before using breakpoints.`;if(e===o.Chapter.HTML)return"However, you have chosen HTML, the standard markup language for webpages. Your code will be rendered directly as a HTML document.\n\nJavaScript code can be added to a HTML document using the `<script>` tag; any script errors will be displayed in the output below.\n\n<b>Note:</b> Error messages may differ between browsers, e.g. when using Safari, errors can only be viewed on the browser console itself. Please check the browser console (typically by pressing `F12`) for more detailed errors and warnings.";const n=`${ne.y.sourceDocs}source_${e}${t!==o.Variant.DEFAULT&&t!==o.Variant.NATIVE?`_${t}`:""}/`;return`You have chosen the sublanguage [_${(0,F.w$)(e,t)}_](${n}).`})(e,t)+Ve,Be=e=>{return t=e.chapter,n=e.variant,Ue(t,n);var t,n};var He=n(90713),Ge=n(22657),Ze=n(32070),ze=n(18465),Ye=n(62629),$e=n(78922);const Ke={goGreen:"h u l k"};async function qe(e,t,n,s,i){var r;const a=(0,Ge.m)(e),l=null!==(r=(0,He.GA)(a.chap))&&void 0!==r?r:void 0;if(l===o.Chapter.FULL_JS)(0,f.oO)();else if(l===o.Chapter.FULL_TS)(0,f.Ze)();else{var d,u,h,p;if(l===o.Chapter.HTML){if(!await(0,f.zZ)())return}const e=void 0===a.prgrm?"":(0,c.decompressFromEncodedURIComponent)(a.prgrm),r=(0,F.CL)(n),m=void 0===a.files?{[r]:e}:(0,Ge.m)((0,c.decompressFromEncodedURIComponent)(a.files));null!==i&&await(0,le.c2)(n,i,m),s((0,L.setFolderMode)(n,!1));const g=null!==(d=(0,He.YF)(a.isFolder))&&void 0!==d&&d;s((0,L.setFolderMode)(n,g));const b=null!==(u=null===(h=a.tabs)||void 0===h?void 0:h.split(",").map(c.decompressFromEncodedURIComponent))&&void 0!==u?u:[r];s((0,L.removeEditorTabsForDirectory)(n,Ye.z[n])),b.forEach((e=>{var t;return s((0,L.addEditorTab)(n,e,null!==(t=m[e])&&void 0!==t?t:""))}));const v=null!==(p=(0,He.GA)(a.tabIdx))&&void 0!==p?p:0;if(s((0,L.updateActiveEditorTabIndex)(n,v)),l){const e=(0,F.C3)(l,a.variant);t.handleChapterSelect(l,e.variant),s((0,k.playgroundConfigLanguage)(e))}const x=Math.max((0,He.GA)(a.exec||"1000")||1e3,1e3);x&&t.handleChangeExecTime(x)}}const Je=e=>{const{isSicpEditor:t}=e,n=t?"sicp":"playground",{isMobileBreakpoint:a}=(0,j.Fs)(),[c,f]=(0,u.useState)(),O=(0,m.TH)(),P=(0,m.s0)(),A=(0,p.oR)(),U=new URLSearchParams(O.search).get("add_device"),{editorTabs:B,editorSessionId:H,execTime:G,stepLimit:Z,isEditorAutorun:Y,isRunning:$,isDebugging:K,output:q,replValue:J,sharedbConnected:W,usingSubst:Q,usingCse:ee,isFolderModeEnabled:te,activeEditorTabIndex:le,context:{chapter:de,variant:ce}}=(0,j.ix)((e=>e.workspaces[n])),ue=(0,j.ix)((e=>e.fileSystem.inBrowserFileSystem)),{queryString:he,shortURL:pe,persistenceFile:me,githubSaveInfo:ge}=(0,j.ix)((e=>e.playground)),{sourceChapter:be,sourceVariant:ve,googleUser:xe,githubOctokitObject:Se}=(0,j.ix)((e=>e.session)),ye=(0,p.I0)(),{handleChangeExecTime:Ce,handleChapterSelect:Ee,handleEditorValueChange:je,handleSetEditorBreakpoints:fe,handleReplEval:Le,handleReplOutputClear:Ie,handleUsingSubst:we}=(0,u.useMemo)((()=>({handleChangeExecTime:e=>ye((0,L.changeExecTime)(e,n)),handleChapterSelect:(e,t)=>ye((0,L.chapterSelect)(e,t,n)),handleEditorValueChange:(e,t)=>ye((0,L.updateEditorValue)(n,e,t)),handleSetEditorBreakpoints:(e,t)=>ye((0,L.setEditorBreakpoint)(n,e,t)),handleReplEval:()=>ye((0,L.evalRepl)(n)),handleReplOutputClear:()=>ye((0,L.clearReplOutput)(n)),handleUsingSubst:e=>ye((0,L.toggleUsingSubst)(e,n))})),[ye,n]);U&&!c&&(f(U),P(O.pathname,{replace:!0}));const[ke,Fe]=(0,u.useState)(new Date),[De,Te]=(0,u.useState)(!1),{selectedTab:Ne,setSelectedTab:Re}=(0,E.__)(n,U?Ae.B_.remoteExecution:Ae.B_.introduction),[_e,Me]=(0,u.useState)(!1),[Ve,Ue]=(0,u.useState)((()=>{var e,t;return(0,ze.wH)("playground",{editorValue:null!==(e=null===(t=B[0])||void 0===t?void 0:t.value)&&void 0!==e?e:"",chapter:de})})),He=(0,u.useMemo)((()=>(0,$e.sd)(c,f)),[c]),Ge=(0,j.ix)((e=>!!e.session.remoteExecutionSession))&&!t,Je=(0,j.ix)((e=>e.workspaces.playground.externalLibrary));(0,u.useEffect)((()=>{var e,t;Ue((0,ze.wH)("playground",{editorValue:null!==(e=null===(t=B[0])||void 0===t?void 0:t.value)&&void 0!==e?e:"",chapter:de}))}),[H]);const We=t?e.initialEditorValueHash:O.hash;(0,u.useEffect)((()=>{if(We)qe(We,{handleChangeExecTime:Ce,handleChapterSelect:Ee},n,ye,ue);else if(be&&ve){Ee(be,ve);const e=(0,F.C3)(be,ve);ye((0,k.playgroundConfigLanguage)(e)),ye((0,L.setFolderMode)(n,!1))}}),[ye,ue,We,be,ve,n,Ee,Ce]),(0,u.useEffect)((()=>{Ne&&(a&&$e.NG.includes(Ne)?Re(Ae.B_.mobileEditor):!a&&$e.JN.includes(Ne)&&Re(Ae.B_.introduction))}),[a,Ne,Re]);const Xe=(0,u.useMemo)((()=>({goGreen:()=>Te(!De)})),[De]),Qe=u.useCallback(((e,t)=>{Fe(new Date),je(e,t)}),[je]),et=(0,u.useCallback)((e=>{(0,ze.cM)(Ve,e)}),[Ve]),tt=(0,u.useMemo)((()=>({handleEditorEval:()=>ye((0,L.evalEditor)(n)),handleInterruptEval:()=>ye((0,g.beginInterruptExecution)(n)),handleToggleEditorAutorun:()=>ye((0,L.toggleEditorAutorun)(n)),handleDebuggerPause:()=>ye((0,g.beginDebuggerPause)(n)),handleDebuggerReset:()=>ye((0,g.debuggerReset)(n)),handleDebuggerResume:()=>ye((0,g.debuggerResume)(n))})),[ye,n]),nt=(0,j.ix)((e=>e.playground.languageConfig)),st=(0,u.useMemo)((()=>(0,M.jsx)(T.k,{isEntrypointFileDefined:null!==le,isDebugging:K,isEditorAutorun:Y,isRunning:$,autorunDisabled:Ge,sourceChapter:nt.chapter,pauseDisabled:Ge||!(0,F.lq)(nt.chapter),...tt},"autorun")),[le,K,Y,$,nt.chapter,tt,Ge]),it=(0,u.useCallback)(((e,t)=>{const{chapter:n,variant:s}=e;(n<=2&&_e||Ne===Ae.B_.substVisualizer)&&we(!0),n>2&&(Ie(),we(!1));const i={time:Date.now(),type:"chapterSelect",data:n};et(i),Ee(n,s),ye((0,k.playgroundConfigLanguage)(e))}),[ye,_e,Ne,et,Ie,we,Ee]),ot=(0,u.useMemo)((()=>(0,M.jsx)(N.b,{handleChapterSelect:it,isFolderModeEnabled:te,sourceChapter:nt.chapter,sourceVariant:nt.variant,disabled:Ge},"chapter")),[it,te,nt.chapter,nt.variant,Ge]),rt=(0,u.useMemo)((()=>Ne===Ae.B_.substVisualizer?null:(0,M.jsx)(R._,{handleReplOutputClear:Ie},"clear_repl")),[Ie,Ne]),at=(0,u.useMemo)((()=>Ne===Ae.B_.substVisualizer?null:(0,M.jsx)(_.e,{handleReplEval:Le,isRunning:$},"eval_repl")),[Le,$,Ne]),lt=me&&(!me.lastSaved||me.lastSaved<ke),dt=(0,u.useMemo)((()=>(0,M.jsx)(z,{isFolderModeEnabled:te,currentFile:me,loggedInAs:xe,isDirty:lt,onClickSaveAs:()=>ye((0,w.persistenceSaveFileAs)()),onClickOpen:()=>ye((0,w.persistenceOpenPicker)()),onClickSave:me?()=>ye((0,w.persistenceSaveFile)(me)):void 0,onClickLogOut:()=>ye((0,b.logoutGoogle)()),onPopoverOpening:()=>ye((0,w.persistenceInitialise)())},"googledrive")),[te,me,xe,lt,ye]),ct=ge&&(!ge.lastSaved||ge.lastSaved<ke),ut=(0,u.useMemo)((()=>(0,M.jsx)(re,{isFolderModeEnabled:te,loggedInAs:Se.octokit,githubSaveInfo:ge,isDirty:ct,onClickOpen:()=>ye((0,I.githubOpenFile)()),onClickSaveAs:()=>ye((0,I.githubSaveFileAs)()),onClickSave:()=>ye((0,I.githubSaveFile)()),onClickLogIn:()=>ye((0,b.loginGitHub)()),onClickLogOut:()=>ye((0,b.logoutGitHub)())},"github")),[ye,Se.octokit,ct,ge,te]),ht=(0,u.useMemo)((()=>(0,M.jsx)(V,{execTime:G,handleChangeExecTime:Ce},"execution_time")),[G,Ce]),pt=(0,u.useMemo)((()=>(0,M.jsx)(ie,{stepLimit:Z,stepSize:Q?2:1,handleChangeStepLimit:e=>{ye((0,L.changeStepLimit)(e,n)),ee&&ye((0,L.toggleUpdateCse)(!0,n))},handleOnBlurAutoScale:e=>{ye(e%2!==0&&Q?(0,L.changeStepLimit)(e+1,n):(0,L.changeStepLimit)(e,n)),ee&&ye((0,L.toggleUpdateCse)(!0,n))}},"step_limit")),[ye,Z,Q,ee,n]),mt=(0,u.useCallback)((()=>A.getState().workspaces[n].editorTabs[0].value),[A,n]),gt=(0,u.useMemo)((()=>(0,M.jsx)(X,{isFolderModeEnabled:te,editorSessionId:H,getEditorValue:mt,handleSetEditorSessionId:e=>ye((0,v.setEditorSessionId)(n,e)),sharedbConnected:W},"session")),[ye,mt,te,H,W,n]),bt=(0,u.useMemo)((()=>{const n=t?ne.y.playground+"#"+e.initialEditorValueHash:he;return(0,M.jsx)(se,{handleGenerateLz:()=>ye((0,k.generateLzString)()),handleShortenURL:e=>ye((0,k.shortenURL)(e)),handleUpdateShortURL:e=>ye((0,k.updateShortURL)(e)),queryString:n,shortURL:pe,isSicp:t},"share")}),[ye,t,e.initialEditorValueHash,he,pe]),vt=(0,u.useMemo)((()=>(0,M.jsx)(oe,{isFolderModeEnabled:te,isSessionActive:""!==H,isPersistenceActive:void 0!==me||""!==ge.repoName,toggleFolderMode:()=>ye((0,L.toggleFolderMode)(n))},"folder")),[ye,ge.repoName,te,me,H,n]);(0,u.useEffect)((()=>{const e=(0,F.C3)(de,ce);ye((0,k.playgroundConfigLanguage)(e))}),[ye,de,ce]);const xt=nt.supports.dataVisualizer,St=nt.supports.cseMachine,yt=nt.supports.substVisualizer,Ct=(0,u.useMemo)((()=>(0,$e.EG)(Be(nt))),[nt]),Et=(0,u.useMemo)((()=>{const e=[Ct];return nt.chapter===o.Chapter.HTML?(q.length>0&&"result"===q[0].type&&e.push((0,y.Z)(q[0],(e=>ye((0,L.addHtmlConsoleError)(e,n))),n)),e):(Ge||(xt&&e.push((0,S.Z)(n)),St&&e.push((0,x.Z)(n)),yt&&e.push((0,$e.a0)(n,q))),t||ne.Z.playgroundOnly||e.push(He),e)}),[Ct,nt.chapter,q,Ge,t,ye,n,xt,St,yt,He]),jt=[...Et].filter((({id:e})=>!(e&&$e.NG.includes(e)))),ft=(0,u.useCallback)((t=>{const n=()=>{t.getSession().addFold("    ",new r.Range(1,0,e.prependLength,0)),t.renderer.off("afterRender",n)};t.renderer.on("afterRender",n)}),[e.prependLength]),Lt=(0,u.useCallback)(((e,t)=>{const s={time:Date.now(),type:"codeDelta",data:t};et(s),ye((0,L.toggleUpdateCse)(!0,n)),ye((0,L.setEditorHighlightedLines)(n,0,[]))}),[et,ye,n]),It=(0,u.useCallback)((e=>{const t={time:Date.now(),type:"cursorPositionChange",data:e.getCursor()};et(t)}),[et]),wt=(0,u.useCallback)((e=>{const t=e.getRange(),n=e.isBackwards();if(!(0,d.isEqual)(t.start,t.end)){const e={time:Date.now(),type:"selectionRangeData",data:{range:t,isBackwards:n}};et(e)}}),[et]),kt=(0,u.useCallback)(((e,t)=>{const s=t.filter((e=>!!e)).length;s>0&&(Me(!0),de<=2&&we(!0)),0===s&&(Me(!1),Ne!==Ae.B_.substVisualizer&&(Ie(),we(!1))),fe(e,t),ye((0,L.toggleUpdateCse)(!0,n))}),[Ne,ye,n,fe,Ie,we,de]),Ft=!nt.supports.repl||Ge,Dt=(0,u.useMemo)((()=>({handleDeclarationNavigate:e=>ye((0,L.navigateToDeclaration)(n,e)),handlePromptAutocomplete:(e,t,s)=>ye((0,L.promptAutocomplete)(n,e,t,s)),handleSendReplInputToOutput:e=>ye((0,L.sendReplInputToOutput)(e,n)),handleSetSharedbConnected:e=>ye((0,v.setSharedbConnected)(n,e)),setActiveEditorTabIndex:e=>ye((0,L.updateActiveEditorTabIndex)(n,e)),removeEditorTabByIndex:e=>ye((0,L.removeEditorTab)(n,e))})),[ye,n]),Tt={editorSessionId:H,isEditorAutorun:Y,editorVariant:"normal",baseFilePath:Ye.z[n],isFolderModeEnabled:te,activeEditorTabIndex:le,setActiveEditorTabIndex:Dt.setActiveEditorTabIndex,removeEditorTabByIndex:Dt.removeEditorTabByIndex,editorTabs:B.map(ae.F),handleDeclarationNavigate:Dt.handleDeclarationNavigate,handleEditorEval:tt.handleEditorEval,handlePromptAutocomplete:Dt.handlePromptAutocomplete,handleSendReplInputToOutput:Dt.handleSendReplInputToOutput,handleSetSharedbConnected:Dt.handleSetSharedbConnected,onChange:Lt,onCursorChange:It,onSelectionChange:wt,onLoad:t&&e.prependLength?ft:void 0,sourceChapter:nt.chapter,externalLibraryName:Je,sourceVariant:nt.variant,handleEditorValueChange:Qe,handleEditorUpdateBreakpoints:kt},Nt=(0,u.useMemo)((()=>({handleBrowseHistoryDown:()=>ye((0,L.browseReplHistoryDown)(n)),handleBrowseHistoryUp:()=>ye((0,L.browseReplHistoryUp)(n)),handleReplValueChange:e=>ye((0,L.updateReplValue)(e,n))})),[ye,n]),Rt={output:q,replValue:J,handleReplEval:Le,usingSubst:Q,handleBrowseHistoryDown:Nt.handleBrowseHistoryDown,handleBrowseHistoryUp:Nt.handleBrowseHistoryUp,handleReplValueChange:Nt.handleReplValueChange,sourceChapter:nt.chapter,sourceVariant:nt.variant,externalLibrary:D.L.NONE,hidden:Ne===Ae.B_.substVisualizer||Ne===Ae.B_.cseMachine,inputHidden:Ft,replButtons:[Ft?null:at,rt],disableScrolling:t},_t=(0,u.useMemo)((()=>({tabs:[...te?[{label:"Folder",body:(0,M.jsx)(Oe,{workspaceLocation:"playground",basePath:Ye.z[n]}),iconName:i.d.FOLDER_CLOSE,id:Ae.B_.folder}]:[]]})),[te,n]),Ot={controlBarProps:{editorButtons:[st,nt.chapter===o.Chapter.FULL_JS?null:bt,ot,t?null:gt,nt.supports.multiFile?vt:null,dt,ut,Ge||!(0,F.lq)(nt.chapter)?null:Q||ee?pt:ht]},editorContainerProps:Tt,handleSideContentHeightChange:(0,u.useCallback)((e=>ye((0,C.changeSideContentHeight)(e,n))),[ye,n]),replProps:Rt,sideBarProps:_t,sideContentProps:{selectedTabId:Ne,tabs:{beforeDynamicTabs:Et,afterDynamicTabs:[]},workspaceLocation:n},sideContentIsResizeable:Ne!==Ae.B_.substVisualizer&&Ne!==Ae.B_.cseMachine},Pt={editorContainerProps:Tt,replProps:Rt,sideBarProps:_t,mobileSideContentProps:{mobileControlBarProps:{editorButtons:[st,ot,nt.chapter===o.Chapter.FULL_JS?null:bt,t?null:gt,nt.supports.multiFile?vt:null,dt,ut]},selectedTabId:Ne,onChange:Re,tabs:{beforeDynamicTabs:jt,afterDynamicTabs:[]},workspaceLocation:n}};return a?(0,M.jsx)("div",{className:l()("Playground",s.DARK,De?"GreenScreen":void 0),children:(0,M.jsx)(Pe.Z,{...Pt})}):(0,M.jsx)(h.HotKeys,{className:l()("Playground",s.DARK,De?"GreenScreen":void 0),keyMap:Ke,handlers:Xe,children:(0,M.jsx)(Ze.Z,{...Ot})})},We=Je;We.displayName="Playground";const Xe=Je}}]);
//# sourceMappingURL=85036.9cc5d001.chunk.js.map
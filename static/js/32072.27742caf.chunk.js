"use strict";(globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).push([[32072],{42693:(e,t,s)=>{s.d(t,{Z:()=>r});var n=s(84879),a=s(92379),o=s(72791),i=s(80184);const r=e=>((0,o.useEffect)((()=>{var t;null===(t=e.loadContentDispatch)||void 0===t||t.call(e)}),[]),(0,i.jsx)("div",{className:"ContentDisplay row center-xs",children:(0,i.jsx)("div",{className:(e.fullWidth?"col-md-12":"col-md-10 col-xs-11")+" contentdisplay-content-parent",children:(0,i.jsx)(n.Z,{className:"contentdisplay-content",elevation:a.u.THREE,children:e.display})})}))},60054:(e,t,s)=>{s.d(t,{b:()=>v});var n=s(44805),a=s(79230),o=s(63978),i=s(53424),r=s(3047),l=s(28644),c=s(54519),d=(s(72791),s(95134)),u=s(9631),m=s(90362),h=s(80184);const p=({itemsParentRef:e,renderItem:t,items:s})=>{const o=s.filter((({variant:e})=>e===c.Variant.DEFAULT)),i=s.filter((({variant:e})=>e!==c.Variant.DEFAULT));return(0,h.jsxs)(n.v,{ulRef:e,style:{display:"flex",flexDirection:"column"},children:[o.map(t),i.length>0&&(0,h.jsx)(a.s,{text:"Variants",icon:"cog",children:i.map(t)},"variant-menu")]})},g=e=>(t,{handleClick:s})=>{const n=e&&t.chapter===c.Chapter.SOURCE_1,o=n?"Folder mode makes use of lists which are not available in Source 1. To switch to Source 1, disable Folder mode.":void 0;return(0,h.jsx)(r.u,{content:o,disabled:void 0===o,children:(0,h.jsx)(a.s,{onClick:s,text:t.displayName,disabled:n})},t.displayName)},b=l.P.ofType(),v=({isFolderModeEnabled:e,sourceChapter:t,sourceVariant:s,handleChapterSelect:n=(()=>{}),disabled:a=!1})=>{const r=(0,m.ix)((e=>e.playground.languageConfig.mainLanguage)),l=[d.Sl,...d.Vf,...u.Z.playgroundOnly?[d.qP,d.uQ,d.s6]:[],...d.ik,...d.YB];return(0,h.jsx)(b,{items:l.filter((({mainLanguage:e})=>e===r)),onItemSelect:n,itemRenderer:g(e),itemListRenderer:p,filterable:!1,disabled:a,children:(0,h.jsx)(o.z,{minimal:!0,text:(0,d.w$)(t,s),rightIcon:a?null:i.d.DOUBLE_CARET_VERTICAL,disabled:a})})}},34165:(e,t,s)=>{s.d(t,{g:()=>r});var n=s(53424),a=(s(72791),s(17862)),o=s(80184);const i=({onClick:e})=>(0,o.jsx)(a.Z,{label:"Return to Academy",icon:n.d.ARROW_RIGHT,onClick:e,options:{iconOnRight:!0}}),r=e=>e.questionProgress[0]===e.questionProgress[1]?(0,o.jsx)(i,{onClick:e.onClickReturn},"return_to_academy"):(0,o.jsx)(a.Z,{label:"Next",icon:n.d.ARROW_RIGHT,onClick:e.onClickNext,options:{iconOnRight:!0}})},68206:(e,t,s)=>{s.d(t,{f:()=>i});var n=s(53424),a=(s(72791),s(17862)),o=s(80184);const i=e=>e.questionProgress[0]<=1?null:(0,o.jsx)(a.Z,{label:"Previous",icon:n.d.ARROW_LEFT,onClick:e.onClick})},63309:(e,t,s)=>{s.d(t,{M:()=>o});s(72791);var n=s(17862),a=s(80184);const o=({questionProgress:e})=>(0,a.jsx)(n.Z,{label:`Question ${e[0]} of ${e[1]}  `,isDisabled:!0})},71697:(e,t,s)=>{s.d(t,{A:()=>i});var n=s(53424),a=(s(72791),s(17862)),o=s(80184);const i=({onClick:e})=>(0,o.jsx)(a.Z,{label:"Reset",icon:n.d.REPEAT,onClick:e})},1799:(e,t,s)=>{s.d(t,{t:()=>r});var n=s(50698),a=s(53424),o=(s(72791),s(17862)),i=s(80184);const r=e=>{const t=e.hasUnsavedChanges?{intent:n.S.WARNING,minimal:!1}:{};return(0,i.jsx)(o.Z,{label:"Save",icon:a.d.FLOPPY_DISK,onClick:e.onClickSave,options:t})}},45686:(e,t,s)=>{s.d(t,{Z:()=>B});var n=s(55048),a=s(53424),o=s(72791),i=s(24805),r=s(14635),l=s(19832),c=s(55360),d=s(70152),u=s(39215),m=s(59962),h=s.n(m),p=s(1324),g=s(80184);const b=e=>(0,g.jsx)(h(),{axis:"y",handle:"#dragHandle",position:e.position,bounds:{top:-500,left:0,right:0,bottom:0},onDrag:e.onDrag,disabled:e.disabled,children:(0,g.jsxs)("div",{className:"mobile-draggable",children:[e.disabled?(0,g.jsx)("div",{className:"handle disabled",id:"draghandle",children:["1","2","3"].map((e=>(0,g.jsx)("div",{className:"circle"},e)))}):(0,g.jsx)("div",{className:"handle enabled",id:"dragHandle",children:["1","2","3"].map((e=>(0,g.jsx)("div",{className:"circle"},e)))}),(0,g.jsx)("div",{className:"REPL-content",children:(0,g.jsx)(p.Z,{...e.replProps})})]})});var v=s(81495),x=s.n(v);const f=e=>{const[t,s]=o.useState(!1),[n,a]=o.useState("\u1438"),[i,r]=o.useState({x:0,y:0}),[l,c]=o.useState(1),d=e=>{e.preventDefault()},u={onKeyPress:t=>{if(!e.targetKeyboardInput)return;const s=e.targetKeyboardInput;"{arrowleft}"===t?s.navigateLeft():"{arrowright}"===t?s.navigateRight():"{bksp}"===t?s.remove("left"):"{tab}"===t?s.insert("\t"):["+","-","*","/","%","=>","===","&&","||"].includes(t)?s.insert(" "+t+" "):s.insert(t)},baseClass:"simple-keyboard-shortcut",layout:{default:["{ } ( ) \" ' _ => ;","{tab} && || ! < > = ===","+ - * / % // {arrowleft} {arrowright}"]},buttonTheme:[{class:"mobile-navigation",buttons:"{arrowleft} {arrowright}"},{class:"big-buttons",buttons:"=== &&"}],theme:"hg-theme-default",preventMouseDownDefault:!0,disableCaretPositioning:!1};return(0,g.jsx)(h(),{axis:"y",handle:"#floating-dragHandle",position:i,bounds:{top:-200,left:0,right:0,bottom:200},onDrag:(e,t)=>{r(t)},children:(0,g.jsxs)("div",{className:"mobile-floating-keyboard",id:"mobile-floating-toggle",children:[(0,g.jsx)("button",{className:"mobile-floating-toggle",onClick:e=>{t?(document.getElementById("mobile-keyboard-toggle").style.setProperty("display","none"),document.getElementById("mobile-floating-toggle").style.setProperty("width","42px"),document.getElementById("mobile-floating-toggle").style.setProperty("opacity","0.6"),a("\u1438"),s(!1)):(document.getElementById("mobile-keyboard-toggle").style.setProperty("display","flex"),document.getElementById("mobile-floating-toggle").style.setProperty("width","99%"),document.getElementById("mobile-floating-toggle").style.setProperty("opacity","1"),a("\u1433"),s(!0))},onMouseDown:d,children:n}),(0,g.jsxs)("div",{className:"mobile-keyboard-toggle-container",id:"mobile-keyboard-toggle",children:[(0,g.jsx)("div",{className:"mobile-keyboard-container",children:(0,g.jsx)(x(),{...u})}),(0,g.jsx)("button",{className:"mobile-keyboard-row-toggle",onClick:e=>{c((l+1)%3);const t=document.getElementsByClassName("simple-keyboard-shortcut");Array.from(t)[0].style.top=45*-l+"px"},onMouseDown:d,children:"\u2938"})]}),(0,g.jsx)("div",{id:"floating-dragHandle",children:":"})]})})};var C=s(28680),y=s(56009),j=s(37753),w=s(37305),k=s(3047),E=s(41418),N=s.n(E),T=s(1309),A=s(5973),S=s(60879),P=s(63978),_=s(68066);const O=e=>{const t=(0,g.jsxs)("div",{className:"mobile-control-bar",children:[e.editorButtons,e.flowButtons,e.editingWorkspaceButtons]});return(0,g.jsx)(_.p,{content:t,autoFocus:!1,children:(0,g.jsx)(P.z,{minimal:!0,icon:a.d.COG,className:"mobile-control-bar-button"})})},D=({renderActiveTabPanelOnly:e,mobileControlBarProps:t,onChange:s,selectedTabId:n,...a})=>{const o=/iPhone|iPod/.test(navigator.platform),i=(e,t)=>e.map((e=>((e,s)=>{if(!e.body)return;const n=s?{...e.body,props:{...e.body.props,workspaceLocation:s}}:e.body;return(0,g.jsx)("div",{className:e.id===t?"mobile-selected-panel":"mobile-unselected-panel",children:n},e.id)})(e,a.workspaceLocation)));return(0,g.jsx)(A.Z,{...a,children:({tabs:s,changeTabsCallback:n,selectedTab:r})=>(0,g.jsxs)(g.Fragment,{children:[i(s,r),(0,g.jsx)("div",{className:"mobile-tabs-container",children:(0,g.jsxs)(j.mQ,{id:"mobile-side-content",onChange:n,renderActiveTabPanelOnly:e,selectedTabId:r,className:N()(w.DARK,"mobile-side-content"),children:[s.map((e=>((e,t)=>{const s=void 0===e.id?e.label:e.id,n=(0,g.jsx)(k.u,{content:e.label,onOpening:()=>{var e;t&&(null===(e=document.getElementById((0,T.YX)(s)))||void 0===e||e.click())},children:(0,g.jsx)("div",{className:"side-content-tooltip",id:(0,T.YX)(s),children:(0,g.jsx)(C.I,{icon:e.iconName,iconSize:20})})});return(0,g.jsx)(y.O,{id:s,title:n,disabled:e.disabled,className:"side-content-tab"},s)})(e,o))),("playground"===a.workspaceLocation||"sicp"===a.workspaceLocation)&&(0,g.jsx)(O,{...t})]})})]})})},I=o.memo(D,S.t),B=e=>{var t;const s=/Android/.test(navigator.userAgent),m=(0,i.useMediaQuery)({orientation:"portrait"}),[h,p]=o.useState({x:0,y:0}),[v,x]=o.useState(!1);n.$.onlyShowFocusOnTabs(),o.useEffect((()=>("assessment"===e.mobileSideContentProps.workspaceLocation&&document.documentElement.style.setProperty("--mobile-panel-height","calc(100% - 100px - 1.1rem)"),()=>{document.documentElement.style.setProperty("--mobile-panel-height","calc(100% - 70px)")})),[]),o.useEffect((()=>{if(m&&s){document.documentElement.style.setProperty("overflow","auto");document.querySelector("meta[name=viewport]").setAttribute("content","height="+window.innerHeight+", width=device-width")}return()=>{if(s){document.documentElement.style.setProperty("overflow","hidden");document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0")}E()}}),[m,s]);const[C,y]=o.useState(null),j=()=>y(null),w=e=>({...e,onFocus:(t,s)=>{e.onFocus&&e.onFocus(t,s),s&&y(s)},onBlur:(t,s)=>{e.onBlur&&e.onBlur(t,s),j()}}),k=e=>{document.documentElement.style.setProperty("--mobile-repl-height",Math.max(-e,0)+"px"),p({x:0,y:e})},E=()=>{p({x:0,y:0}),document.documentElement.style.setProperty("--mobile-repl-height","0px")},N=null===(t=e.editorContainerProps)||void 0===t?void 0:t.handleEditorEval,T=o.useCallback(((e,t)=>{e===u.B_.mobileEditorRun&&N&&N(),e===u.B_.mobileEditorRun&&t!==u.B_.substVisualizer&&t!==u.B_.autograder&&t!==u.B_.testcases?k(-300):E(),e===u.B_.folder||e===u.B_.substVisualizer||t===u.B_.substVisualizer&&e===u.B_.mobileEditorRun?x(!0):x(!1)}),[N]),A=e.mobileSideContentProps.onChange,S=o.useCallback(((e,t,s)=>{A(e,t,s),T(e,t)}),[T,A]),P=e.sideBarProps.tabs.filter((e=>void 0!==e.id)),_=o.useMemo((()=>({label:"Editor",iconName:a.d.EDIT,body:null,id:u.B_.mobileEditor})),[]),O=o.useMemo((()=>({label:"Run",iconName:a.d.PLAY,body:null,id:u.B_.mobileEditorRun})),[]),D=o.useCallback((()=>{var t,s,n,a;return{...e.mobileSideContentProps,onChange:S,tabs:{beforeDynamicTabs:[...P,_,...null!==(t=null===(s=e.mobileSideContentProps.tabs)||void 0===s?void 0:s.beforeDynamicTabs)&&void 0!==t?t:[]],afterDynamicTabs:[...null!==(n=null===(a=e.mobileSideContentProps.tabs)||void 0===a?void 0:a.afterDynamicTabs)&&void 0!==n?n:[],O]}}}),[S,_,O,e.mobileSideContentProps,P]),B="assessment"===e.mobileSideContentProps.workspaceLocation||"githubAssessment"===e.mobileSideContentProps.workspaceLocation;return(0,g.jsxs)("div",{className:"workspace mobile-workspace",children:[(0,g.jsx)(d.N,{when:!!e.hasUnsavedChanges,message:"You have changes that may not be saved. Are you sure you want to leave?"}),B&&(0,g.jsx)(r.Z,{...e.mobileSideContentProps.mobileControlBarProps}),(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"mobile-editor-panel",children:(()=>{if(e.editorContainerProps){const t={...e.editorContainerProps};return"sourcecast"===t.editorVariant&&(t.setDraggableReplPosition=()=>k(-100)),(0,g.jsx)(l.Z,{...w(e.editorContainerProps)})}return(0,g.jsx)(c.Z,{...e.mcqProps})})()}),(0,g.jsx)(I,{...D()})]}),(0,g.jsx)(b,{position:h,onDrag:(e,t)=>{document.documentElement.style.setProperty("--mobile-repl-height",Math.max(-t.y,0)+"px"),p(t)},disabled:v,replProps:(e=>({...e,onFocus:t=>{e.onFocus&&e.onFocus(t),y(t)},onBlur:()=>{e.onBlur&&e.onBlur(),j()}}))(e.replProps)},"repl"),(0,g.jsx)(f,{targetKeyboardInput:C})]})}},9331:(e,t,s)=>{s.d(t,{Z:()=>p});var n=s(84879),a=s(37305),o=s(92379),i=s(61509),r=s(75488),l=s(49994),c=s(41418),d=s.n(c),u=s(72791),m=s(76796),h=s(80184);const p=e=>{const{index:t,testcase:s,handleTestcaseEval:c}=e,p=u.useMemo((()=>{const e=void 0!==s.result||s.errors,t=(0,l.stringify)(s.result)===s.answer;return{correct:e&&t,wrong:e&&!t,secret:s.type===m.Be.secret||s.type===m.Be.opaque}}),[s]),g=u.useCallback((()=>{c(t)}),[t,c]);return(0,h.jsx)("div",{className:d()("AutograderCard",p),"data-testid":"AutograderCard",children:(0,h.jsx)(n.Z,{className:a.INTERACTIVE,elevation:o.u.ONE,onClick:g,children:s.type===m.Be.opaque&&"assessment"===e.workspaceLocation?(0,h.jsx)(i.SU,{className:"testcase-placeholder","data-testid":"testcase-placeholder",children:"Hidden testcase"}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(i.SU,{className:"testcase-program",children:s.program}),(0,h.jsx)(i.SU,{className:"testcase-expected",children:s.answer}),(0,h.jsx)(i.SU,{className:"testcase-actual","data-testid":"testcase-actual",children:s.errors?(0,r.parseError)(s.errors):void 0!==s.result?(0,l.stringify)(s.result):"No Answer"})]})})})}},32072:(e,t,s)=>{s.r(t),s.d(t,{Component:()=>rt,default:()=>lt});var n=s(16499),a=s(14634),o=s(53424),i=s(72791),r=s(78687),l=s(57689),c=s(71594),d=s(90362),u=s(34957),m=s(42693),h=s(94154),p=s(84067),g=s(41921),b=s(37305),v=s(28680),x=s(15853),f=s(44805),C=s(79230),y=s(63978),j=s(68066),w=s(41418),k=s.n(w),E=s(11087),N=s(79037),T=s(17862),A=s(80184);const S=e=>{const{isMobileBreakpoint:t}=(0,d.Fs)(),s=void 0!==(0,d.ix)((e=>e.session.githubOctokitObject)).octokit?(0,A.jsx)(T.Z,{label:"Log Out",icon:o.d.GIT_BRANCH,onClick:e.onClickLogOut}):(0,A.jsx)(T.Z,{label:"Log In",icon:o.d.GIT_BRANCH,onClick:e.onClickLogIn});return(0,A.jsx)(N.h,{large:!t,children:s})};var P=s(90713);const _=[o.d.FLAME,o.d.LIGHTBULB,o.d.PREDICTIVE_ANALYSIS,o.d.COMPARISON,o.d.MANUAL],O=e=>{var t,s;const n=t=>{e.changeCourseHandler(t)};return(0,A.jsxs)(h.w,{className:"NavigationBar secondary-navbar",children:[(0,A.jsx)(p.f,{align:g.v.LEFT,children:null===(t=e.types)||void 0===t?void 0:t.map(((t,s)=>(0,A.jsxs)(E.OL,{to:`/githubassessments/${(0,P.q1)(t)}`,state:{courses:e.courses,assessmentTypeOverviews:e.assessmentTypeOverviews,selectedCourse:e.selectedCourse},className:({isActive:e})=>k()("NavigationBar__link",b.BUTTON,b.MINIMAL,{[b.ACTIVE]:e}),children:[(0,A.jsx)(v.I,{icon:s<5?_[s]:_[0]}),(0,A.jsx)("div",{className:"hidden-xs hidden-sm",children:t})]},t)))}),(0,A.jsxs)(p.f,{align:g.v.RIGHT,children:[void 0!==e.octokit&&e.types&&e.types.length>0&&(0,A.jsx)(x.B,{disabled:!0,leftElement:(0,A.jsx)(j.p,{content:(0,A.jsx)(f.v,{children:null===(s=e.courses)||void 0===s?void 0:s.map((e=>(0,A.jsx)(C.s,{onClick:n,text:e},e)))}),placement:"bottom-end",children:(0,A.jsx)(y.z,{minimal:!0,rightIcon:"caret-down","aria-label":"choose"})}),placeholder:"Select Course",onChange:e.changeCourseHandler,value:e.selectedCourse},"courseselect"),(0,A.jsx)(S,{onClickLogIn:e.handleGitHubLogIn,onClickLogOut:e.handleGitHubLogOut},"loginlogout")]})]})};var D=s(44439),I=s(84879),B=s(92379),R=s(51002),L=s(61509),M=s(5602),H=s(74106);const G=e=>{const{isMobileBreakpoint:t}=(0,d.Fs)(),s=(0,l.s0)();let r;const c=(0,i.useMemo)((()=>(0,A.jsx)(y.z,{icon:o.d.ADD,onClick:()=>s("/githubassessments/editor"),children:"Create a New Assessment!"})),[s]),u=(0,i.useMemo)((()=>(0,A.jsx)(y.z,{icon:o.d.REFRESH,onClick:e.refreshAssessmentOverviews,children:"Refresh Assessments"})),[e.refreshAssessmentOverviews]);if(e.assessmentOverviews)if(0===e.assessmentOverviews.length)r=(0,A.jsxs)(A.Fragment,{children:[c,u,(0,A.jsx)(n.t,{title:"There are no assessments.",icon:o.d.FLAME})]});else{const n=e.assessmentOverviews.map((e=>function(e,t,s){const n=t?5:3,a=e.missionRepoData.repoOwner+"/"+e.missionRepoData.repoName,i=e.dueDate.toDateString(),r=new Date(864e13)>e.dueDate,l=new Date>e.dueDate,c=void 0!==e.link;let d="Open",u=()=>s("/githubassessments/editor",{state:e});c?(d="Accept",u=()=>window.open(e.link)):l&&(d="Review Answers");return(0,A.jsx)("div",{children:(0,A.jsxs)(I.Z,{className:"row listing",elevation:B.u.ONE,children:[(0,A.jsx)("div",{className:`col-xs-${String(n)} listing-picture`,children:(0,A.jsx)("img",{alt:"Assessment",className:`cover-image-${e.title}`,src:e.coverImage?e.coverImage:M})}),(0,A.jsxs)("div",{className:`col-xs-${String(12-n)} listing-text`,children:[(0,A.jsx)("div",{className:"listing-header",children:(0,A.jsxs)(R.x,{ellipsize:!0,children:[(0,A.jsx)(L.H4,{className:"listing-title",children:e.title}),(0,A.jsx)(L.H6,{children:a})]})}),(0,A.jsx)("div",{className:"listing-description",children:(0,A.jsx)(H.Z,{content:e.webSummary})}),(0,A.jsxs)("div",{className:"listing-footer",children:[(0,A.jsxs)(R.x,{className:"listing-due-date",children:[(0,A.jsx)(v.I,{className:"listing-due-icon",iconSize:12,icon:o.d.TIME}),r?"Due: "+i:"No due date"]}),(0,A.jsx)("div",{className:"listing-button",children:(0,A.jsx)(y.z,{icon:o.d.PLAY,minimal:!0,onClick:u,children:(0,A.jsx)("span",{className:"custom-hidden-xxxs",children:d})})})]})]})]})},a)}(e,t,s)));r=(0,A.jsxs)(A.Fragment,{children:[c,u,n]})}else r=(0,A.jsxs)(A.Fragment,{children:[c,(0,A.jsx)(n.t,{description:"Fetching assessment...",icon:(0,A.jsx)(a.$,{})})]});return(0,A.jsx)("div",{className:"Assessment",style:{overflow:"auto"},children:(0,A.jsx)(m.Z,{display:r,loadContentDispatch:()=>{}})})};var U=s(30298),F=s(54519),V=s(763),q=s(60341),Z=s(1309),W=s(89702);const Q="GithubAssessments_missionBrowser__gt6-p",z="GithubAssessments_missionLoading__tNH6Q",Y="GithubAssessments_SideContentMissionEditor__jPyyQ",$="GithubAssessments_SideContentMissionEditorRow__0G8qF",J="GithubAssessments_SideContentMissionEditorLabelColumn__o8uDr",K="GithubAssessments_SideContentMissionEditorOptionColumn__4BMYM";var X=s(32881),ee=s(60054),te=s(89360),se=s(27156),ne=s(34165),ae=s(68206),oe=s(63309),ie=s(71697),re=s(50472),le=s(1799);const ce=e=>{const t=e.mcqDisplayed?"Show MCQ Text":"Hide MCQ Text",s=e.mcqDisplayed?e.displayTextInEditor:e.displayMCQInEditor;return(0,A.jsx)(T.Z,{label:t,icon:o.d.REFRESH,onClick:s})};var de=s(19778).Buffer;const ue=20,me=e=>JSON.stringify(e,null,4),he=e=>e,pe={taskDescription:{fileName:"Problem.md",isDefaultValue:e=>""===e,fromStringConverter:he,toStringConverter:he},starterCode:{fileName:"StarterCode.js",isDefaultValue:e=>""===e,fromStringConverter:he,toStringConverter:he},savedCode:{fileName:"SavedCode.js",isDefaultValue:e=>""===e,fromStringConverter:he,toStringConverter:he},testPrepend:{fileName:"TestPrepend.js",isDefaultValue:e=>""===e,fromStringConverter:he,toStringConverter:he},testPostpend:{fileName:"TestPostpend.js",isDefaultValue:e=>""===e,fromStringConverter:he,toStringConverter:he},testCases:{fileName:"TestCases.json",isDefaultValue:e=>0===e.length,fromStringConverter:JSON.parse,toStringConverter:e=>{const t=e.map((e=>({answer:e.answer,program:e.program,score:e.score?e.score:0,type:e.type?e.type:"public"})));return me(t)}}};async function ge(e,t){const s=be(e.repoOwner,e.repoName,"README.md",t),n=be(e.repoOwner,e.repoName,".metadata",t),a=async function(e,t,s){const n=[];if(void 0===s)return n;const a=await s.repos.getContent({owner:e,repo:t,path:""}),o=a.data;if(!Array.isArray(o))return n;const i=[];for(let r=1;r<=ue;r++){const a="Q"+r;if(void 0===o.find((e=>e.name===a)))break;i.push(s.repos.getContent({owner:e,repo:t,path:a}).then((o=>{if(!Array.isArray(o.data))return;const i=o.data.map((e=>e.name)),l=Object.keys(pe).filter((e=>i.includes(pe[e].fileName))),c=l.map((async n=>{const o=pe[n].fileName,i=await be(e,t,a+"/"+o,s);return pe[n].fromStringConverter(i)}));return Promise.all(c).then((e=>{const t={questionNumber:r,taskDescription:"",starterCode:"",savedCode:"",testPrepend:"",testPostpend:"",testCases:[]};for(let s=0;s<e.length;s++)t[l[s]]=e[s];""===t.savedCode&&(t.savedCode=t.starterCode),n.push(t)}))})).catch((e=>{(0,D.N9)("Error occurred while trying to retrieve file content",1e3),console.error(e)})))}return await Promise.all(i),n.sort(((e,t)=>e.questionNumber-t.questionNumber)),n}(e.repoOwner,e.repoName,t),[o,i,r]=await Promise.all([s,n,a]),l=function(e){try{return JSON.parse(e)}catch(t){return console.error(t),{sourceVersion:F.Chapter.SOURCE_4}}}(i);return{missionRepoData:e,missionBriefing:o,missionMetadata:l,tasksData:r}}async function be(e,t,s,n){let a="";if(void 0===n)return a;try{const o=await n.repos.getContent({owner:e,repo:t,path:s});a=de.from(o.data.content,"base64").toString()}catch(o){(0,D.N9)("Error occurred while trying to retrieve file content",1e3),console.error(o)}return a}function ve(e){return me(e)}function xe(e){let t=!1;const s={answer:0,choices:[],solution:-1,type:"mcq",content:"",grade:0,id:0,library:{chapter:F.Chapter.SOURCE_4,external:{name:"NONE",symbols:[]},globals:[]},maxGrade:0,xp:0,maxXp:0},n=e.trim();if("mcq"===n.substring(0,3).toLowerCase()&&(t=!0),t){const e=n.substring(3,n.length);try{const t=JSON.parse(e),n=t.answer,a=t.choices.map((e=>({content:e.option,hint:e.hint}))),o=t.solution;s.answer=n,s.choices=a,s.solution=o}catch(a){t=!1}}return[t,s]}const fe=e=>(0,A.jsx)(T.Z,{label:"Add Task",icon:o.d.ADD,onClick:function(){e.numberOfTasks!==ue?e.addNewQuestion():(0,D.N9)("Cannot have more than "+ue+" Tasks in a Mission!")}});var Ce=s(79637);const ye=e=>(0,A.jsx)(T.Z,{label:"Delete Current Task",icon:o.d.DELETE,onClick:async function(){if(e.numberOfTasks<=1)return void(0,D.N9)("Cannot delete the only remaining task!");await(0,Ce.pG)({contents:(0,A.jsxs)("div",{children:[(0,A.jsx)("p",{children:"Warning: you are about to delete a task."}),(0,A.jsx)("p",{children:"This action cannot be undone."}),(0,A.jsx)("p",{children:"Please click 'Confirm' to continue, or 'Cancel' to go back."})]}),negativeLabel:"Cancel",positiveIntent:"primary",positiveLabel:"Confirm"})&&e.deleteCurrentQuestion()}});var je=s(19832),we=s(50698);const ke=e=>{const[t,s]=(0,i.useState)("sa-new-mission-repository");return(0,A.jsxs)(U.V,{className:Q,isOpen:!0,children:[(0,A.jsx)("div",{className:k()("githubDialogHeader",b.DIALOG_HEADER),children:(0,A.jsx)("h3",{children:"Please confirm your save"})}),(0,A.jsxs)("div",{className:k()("githubDialogBody",b.DIALOG_BODY),children:[(0,A.jsxs)("div",{children:[(0,A.jsxs)("h4",{children:["This will create a repository owned by ",e.userLogin," with the title:"]}),(0,A.jsx)(x.B,{onChange:function(e){s(e.target.value)},placeholder:"Enter Repository Title",value:t})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("h4",{children:"This repository will be created with following files:"}),e.filesToCreate.map((e=>(0,A.jsx)("li",{children:e},e)))]})]}),(0,A.jsx)("div",{className:k()(b.DIALOG_FOOTER),children:(0,A.jsxs)("div",{className:k()(b.DIALOG_FOOTER_ACTIONS),children:[(0,A.jsx)(y.z,{onClick:function(){e.resolveDialog({confirmSave:!1,repoName:""})},children:"Close"}),(0,A.jsx)(y.A,{onClick:function(){if(""===t)return void(0,D.N9)("Cannot create repository without title!",2e3);e.resolveDialog({confirmSave:!0,repoName:t})},intent:we.S.PRIMARY,children:"Confirm"})]})})]})};var Ee=s(45686),Ne=s(67644);const Te=e=>{const[t,s]=i.useState(!1),n=e.allowEdits,a=i.useRef();return(0,i.useEffect)((()=>{function e(e){n&&(a.current&&!a.current.contains(e.target)&&s(!1),a.current&&a.current.contains(e.target)&&s(!0))}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[n]),(0,A.jsx)("div",{ref:a,children:t?(0,A.jsx)(Ne.K,{onChange:function(t){e.setContent(t.target.value)},fill:!0,growVertically:!0,defaultValue:e.content}):(0,A.jsx)(H.Z,{content:e.content,openLinksInNewWindow:!0})})};var Ae=s(9631);const Se=e=>(0,A.jsx)("div",{className:Y,children:(0,A.jsxs)("div",{className:$,children:[(0,A.jsx)("div",{className:J,children:(0,A.jsx)(L.__,{children:"Source Version"})}),(0,A.jsx)("div",{className:K,children:(0,A.jsx)(ee.b,{isFolderModeEnabled:e.isFolderModeEnabled,sourceChapter:e.missionMetadata.sourceVersion,sourceVariant:Ae.Z.defaultSourceVariant,disabled:!1,handleChapterSelect:function(t,s){!function(t,s){const n=Object.assign({},e.missionMetadata);n[t]=s,e.setMissionMetadata(n)}("sourceVersion",t.chapter)}},"chapter")})]})}),Pe=e=>{const t=e.currentTaskNumber-1,s=e.taskDescriptions,n=e.setTaskDescriptions,a=t<0||t>=s.length||0===s.length,o=a?"Welcome to Mission Mode! This is where the Task Briefing for each question will appear!":s[t],r=i.useCallback((e=>{if(a)return;const o=s.map((e=>e));o[t]=e,n(o)}),[n,s,t,a]);return(0,A.jsx)("div",{children:(0,A.jsx)(Te,{allowEdits:e.allowEdits,content:o,setContent:r})})};var _e=s(94492),Oe=s(93580),De=s(3047),Ie=s(38399),Be=s(9331),Re=s(75488),Le=s(49994),Me=s(76796);const He=e=>{const{index:t,testcase:s,setTestcaseProgram:n,setTestcaseExpectedResult:a,handleTestcaseEval:r,deleteTestcase:l}=e,c=i.useMemo((()=>{const e=void 0!==s.result||s.errors,t=(0,Le.stringify)(s.result)===s.answer;return{correct:e&&t,wrong:e&&!t,secret:s.type===Me.Be.secret||s.type===Me.Be.opaque}}),[s]),d=i.useCallback((()=>{r(t)}),[t,r]),u=s.program,m=s.answer,h=(0,A.jsx)(y.z,{className:"testcase-button",icon:o.d.PLAY,onClick:d}),p=(0,A.jsx)(y.z,{className:"testcase-button",icon:o.d.DELETE,onClick:()=>l(t)}),g=i.useMemo((()=>{let e="No Answer";return s.errors?e=(0,Re.parseError)(s.errors):void 0!==s.result&&(e=(0,Le.stringify)(s.result)),e}),[s]);return(0,A.jsx)("div",{className:k()("EditableAutograderCard",c),children:(0,A.jsxs)(I.Z,{className:b.INTERACTIVE,elevation:B.u.ONE,children:[(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(x.B,{className:"testcase-program",value:u,onChange:e=>n(e.target.value)}),(0,A.jsx)(x.B,{className:"testcase-expected",value:m,onChange:e=>a(e.target.value)}),(0,A.jsx)(x.B,{className:"testcase-actual",value:g,readOnly:!0})]}),h,p]})})};function Ge(e,t){return(0,A.jsx)(Ie.ZP,{className:"react-ace",fontSize:14,highlightActiveLine:!1,mode:"javascript",onChange:t,theme:"source",value:e,width:"100%",height:"16rem"})}const Ue=(0,A.jsxs)("div",{className:"autograder-help-tooltip",children:[(0,A.jsx)("p",{children:"Click on each testcase below to execute it with the program in the editor."}),(0,A.jsx)("p",{children:"To execute all testcases at once, evaluate the program in the editor with this tab active."}),(0,A.jsx)("p",{children:"A green or red background indicates a passed or failed testcase respectively."}),(0,A.jsx)("p",{children:"Private testcases (only visible to staff when grading) have a grey background."})]}),Fe=(e,t)=>(0,A.jsxs)("div",{className:e,children:[t,(0,A.jsx)(v.I,{icon:o.d.CARET_DOWN})]}),Ve=(0,A.jsxs)("div",{className:"testcases-header",children:[Fe("header-fn","Testcase"),Fe("header-expected","Expected result"),Fe("header-actual","Actual result")]}),qe=(e,t,s)=>(0,A.jsx)(T.Z,{label:e,icon:t?o.d.CARET_DOWN:o.d.CARET_RIGHT,onClick:s,options:{className:"collapse-button",minimal:!0}}),Ze=e=>{const[t,s]=i.useState(!0),[n,a]=i.useState(!0),[r,l]=i.useState(!0),{testcases:c,testPrepend:d,testPostpend:u,allowEdits:m,handleTestcaseEval:h,setTaskTestcases:p,setTestPrepend:g,setTestPostpend:b}=e,x=i.useCallback((e=>t=>{const s=c.map((e=>Object.assign({},e)));s[e].program=t,delete s[e].result,p(s)}),[p,c]),f=i.useCallback((e=>t=>{const s=c.map((e=>Object.assign({},e)));s[e].answer=t,delete s[e].result,p(s)}),[p,c]),C=i.useCallback((()=>{const e=[...c];e.push({answer:"",program:"",score:0,type:"public"}),p(e)}),[c,p]),j=i.useCallback((async e=>{if(!await(0,Ce.pG)({title:"confirm testcase deletion",contents:"Are you sure you want to delete this testcase? This cannot be undone.",positiveLabel:"Confirm",negativeLabel:"Cancel"}))return;const t=c.slice(0,e).concat(c.slice(e+1));p(t)}),[c,p]),w=i.useCallback(((e,t)=>m?(0,A.jsx)(He,{index:t,testcase:e,setTestcaseProgram:x(t),setTestcaseExpectedResult:f(t),deleteTestcase:j,handleTestcaseEval:h},t):(0,A.jsx)(Be.Z,{index:t,testcase:e,handleTestcaseEval:h,workspaceLocation:"githubAssessment"},t)),[m,j,h,x,f]),k=i.useMemo((()=>c.length>0?(0,A.jsxs)("div",{className:"testcaseCards",children:[Ve,c.map(((e,t)=>w(e,t)))]}):(0,A.jsx)("div",{className:"noResults",children:"There are no testcases provided for this question."})),[c,w]),E=i.useMemo((()=>(0,A.jsx)(y.z,{className:"collapse-button",icon:o.d.ADD,minimal:!0,text:"Add a new testcase",onClick:C})),[C]),N=i.useCallback((()=>{s(!t)}),[t]),T=i.useCallback((()=>{a(!n)}),[n]),S=i.useCallback((()=>{l(!r)}),[r]);return(0,A.jsxs)("div",{className:"Autograder",children:[(0,A.jsxs)(y.z,{className:"collapse-button",icon:r?o.d.CARET_DOWN:o.d.CARET_RIGHT,minimal:!0,onClick:S,children:[(0,A.jsx)("span",{children:"Testcases"}),(0,A.jsx)(De.u,{content:Ue,placement:_e.I.LEFT,children:(0,A.jsx)(v.I,{icon:o.d.HELP})})]}),(0,A.jsx)(Oe.U,{isOpen:r,keepChildrenMounted:!0,children:(0,A.jsxs)("div",{className:"testcaseeditor-subcomponent",children:[k,m&&E]})}),m&&qe("Testcase Prepend",t,N),m&&(0,A.jsx)(Oe.U,{isOpen:t,keepChildrenMounted:!0,children:(0,A.jsx)("div",{className:"testcaseeditor-subcomponent",children:Ge(d,(e=>g(e)))})}),m&&qe("Testcase Postpend",n,T),m&&(0,A.jsx)(Oe.U,{isOpen:n,keepChildrenMounted:!0,children:(0,A.jsx)("div",{className:"testcaseeditor-subcomponent",children:Ge(u,(e=>b(e)))})})]})};var We=s(39215),Qe=s(32070),ze=s(46883);const Ye="### Assignment Briefing (Click to Edit!)\nWelcome to Assignment Creator! This is where the Briefing for each assignment will appear.\n\nIf you are on the SourceAcademy website, you may edit **this section** by clicking on it. You can also add or delete questions through the control bar.\n\nThe text written here will show up as the `README.md` file on the GitHub repository.\n\nPlease also refer to our instructor's guide [here](https://github.com/source-academy/general/tree/master/instructor/github) to learn more about how to use this website.\n\n### Brief Markdown Cheatsheet\nEverything here is written in Markdown.\n\nThis means that you can **bolden** or *italicize* text by adding asterisks.\n\nPrograms can be formatted through the use of triple backticks:\n```\n// This is a program example\n```\nIf you want to in-line program snippets, rather than display it as a block, you can also use single backticks like `this`.\n\nLists can be created by adding dashes to the start of a line:\n- First element\n- Second element\n- Third element\n\n\nIt is also possible to embed images, like this:\n\n![an embedded image](https://avatars.githubusercontent.com/u/35620705?s=400&u=32f72fd1d65a0d6877ad1d5870ffa327dda754f1&v=4)\n\nIf you need a more detailed cheatsheet, please click [here](https://www.markdownguide.org/cheat-sheet/)!\n",$e="// Your program here!\n",Je={sourceVersion:F.Chapter.SOURCE_1},Ke={questionNumber:0,taskDescription:"### Problem Description (Click to Edit!)\nWelcome to the Assignment Creator! This is where the problem description specific to each problem should be written.\n\nIf you are on the SourceAcademy website, you may edit **this section** by clicking on it. You can also add or delete questions through the control bar.\n\nIf you would like to add new questions outside of the website, simply duplicate this folder, and edit the `Problem.md` and `StarterCode.js` files accordingly. Make sure that the folders are named 'Q1', 'Q2', 'Q3' and so on.\n\nPlease also refer to our instructor's guide [here](https://github.com/source-academy/general/tree/master/instructor/github).\n\n### Brief Markdown Cheatsheet\nEverything here is written in Markdown.\n\nThis means that you can **bolden** or *italicize* text by adding asterisks.\n\nPrograms can be formatted through the use of triple backticks:\n```\n// This is a program example\n```\nIf you want to in-line program snippets, rather than display it as a block, you can also use single backticks like `this`.\n\nLists can be created by adding dashes to the start of a line:\n- First element\n- Second element\n- Third element\n\n\nIt is also possible to embed images, like this:\n\n![an embedded image](https://avatars.githubusercontent.com/u/35620705?s=400&u=32f72fd1d65a0d6877ad1d5870ffa327dda754f1&v=4)\n\nIf you need a more detailed cheatsheet, please click [here](https://www.markdownguide.org/cheat-sheet/)!\n",starterCode:$e,savedCode:$e,testPrepend:"",testPostpend:"",testCases:[]},Xe={answer:-1,choices:[],solution:-1,type:"mcq",content:"",grade:0,id:0,library:{chapter:F.Chapter.SOURCE_4,external:{name:"NONE",symbols:[]},globals:[]},maxGrade:0,xp:0,maxXp:0},et="githubAssessment",tt=()=>{const e=(0,l.s0)(),t=(0,r.I0)(),s=(0,l.TH)(),c=(0,ze.E3)();void 0===c&&e("/githubassessments/login");const{handleEditorEval:u,handleEditorValueChange:m,handleReplEval:h,handleReplOutputClear:p,handleUpdateHasUnsavedChanges:g,handleUpdateWorkspace:v,setActiveEditorTabIndex:x,removeEditorTabByIndex:f}=(0,i.useMemo)((()=>({handleEditorEval:()=>t((0,W.evalEditor)(et)),handleEditorValueChange:(e,s)=>t((0,W.updateEditorValue)(et,e,s)),handleReplEval:()=>t((0,W.evalRepl)(et)),handleReplOutputClear:()=>t((0,W.clearReplOutput)(et)),handleUpdateHasUnsavedChanges:e=>t((0,W.updateHasUnsavedChanges)(et,e)),handleUpdateWorkspace:e=>t((0,W.updateWorkspace)(et,e)),setActiveEditorTabIndex:e=>t((0,W.updateActiveEditorTabIndex)(et,e)),removeEditorTabByIndex:e=>t((0,W.removeEditorTab)(et,e))})),[t]),[C,j]=(0,i.useState)(Je),[w,E]=(0,i.useState)(Je),[N,T]=(0,i.useState)(!1),[S,P]=(0,i.useState)(Ye),[_,O]=(0,i.useState)(Ye),[B,R]=(0,i.useState)(!1),[L,M]=(0,i.useState)([]),[G,Q]=(0,i.useState)([]),[Y,$]=(0,i.useState)(!1),[J,K]=(0,i.useState)(""),[de,ue]=(0,i.useState)(0),[he,be]=(0,i.useState)(!1),[we,Ne]=(0,i.useState)(!0),[_e,Oe]=(0,i.useState)(!1),[De,Ie]=(0,i.useState)(!0),[Be,Re]=(0,i.useState)(Xe),[Le,Me]=(0,i.useState)(void 0),He=s.state,[Ge,Ue]=(0,i.useState)(!1),{selectedTab:Fe,setSelectedTab:Ve}=(0,Z.__)(et,We.B_.questionOverview),{isMobileBreakpoint:qe}=(0,d.Fs)(),{isFolderModeEnabled:$e,activeEditorTabIndex:tt,editorTabs:st,editorTestcases:nt,hasUnsavedChanges:at,isRunning:ot,output:it,replValue:rt}=(0,d.ix)((e=>e.workspaces.githubAssessment)),lt=(0,i.useCallback)(((e,t)=>{ue(e);const s=e-1;v({editorTabs:[{value:t[s].savedCode,highlightedLines:[],breakpoints:[]}],programPrependValue:t[s].testPrepend,programPostpendValue:t[s].testPostpend,editorTestcases:t[s].testCases}),p();const[n,a]=xe(t[s].savedCode);Oe(n),Re(a)}),[v,p]),ct=(0,i.useCallback)((e=>{P(e),R(e!==_)}),[_]),dt=(0,i.useCallback)((e=>{j(e),T(!(0,V.isEqual)(e,w))}),[w]),ut=(0,i.useCallback)((e=>{Q(e),$(!(0,V.isEqual)(e,L))}),[L]),mt=(0,i.useCallback)((e=>{if(e){const[e,t]=xe(G[de-1].savedCode);Oe(e),Re(t)}Ie(e)}),[G,de]),ht=(0,i.useMemo)((()=>N||B||Y),[N,B,Y]);(0,i.useEffect)((()=>{ht!==at&&g(ht)}),[ht,at,g]);const pt=(0,i.useCallback)((async()=>{if(void 0===c)return;const e=He.missionRepoData,t=[ge(e,c),c.users.getAuthenticated().then((t=>t.data.login===e.repoOwner))];Promise.all(t).then((t=>{Me(e),$(!1),R(!1),T(!1),g(!1);const s=t[0];K(s.missionBriefing),j(s.missionMetadata),E(s.missionMetadata),P(s.missionBriefing),O(s.missionBriefing),Q(s.tasksData),M(s.tasksData.map((e=>Object.assign({},e)))),lt(1,s.tasksData);const n=t[1];be(n),Ne(!1)}))}),[He,c,lt,g]),gt=(0,i.useCallback)((()=>{K(Ye),j(Je),E(Je),P(Ye),O(Ye),Q([Ke]),M([Ke]),Ie(!1),lt(1,[Ke]),$(!1),R(!1),T(!1),g(!1),be(!0),Ne(!1)}),[lt,g]);(0,i.useEffect)((()=>{void 0===He||null===He?gt():pt()}),[He,pt,gt]);const bt=(0,A.jsx)(U.V,{className:"assessment-briefing",isOpen:Ge,children:(0,A.jsxs)(I.Z,{children:[(0,A.jsx)(H.Z,{content:J}),(0,A.jsx)(y.z,{className:"assessment-briefing-button",onClick:()=>Ue(!1),text:"Continue"})]})}),vt=(0,i.useCallback)(((e,t)=>{if(e>G.length)return;const s=G.map((e=>Object.assign({},e)));s[e-1]={...s[e-1],savedCode:t},ut(s)}),[G,ut]),xt=(0,i.useCallback)((()=>{const e=G[de-1].starterCode;m(0,e),vt(de,e)}),[de,vt,m,G]),ft=(0,i.useCallback)((async(e,t,s,n,a)=>{const o=Le,{saveType:i}=await(0,ze.UG)(c,o.repoOwner,o.repoName,e);"Overwrite"===i&&await(0,ze.pi)(c,o.repoOwner,o.repoName,e,s,n,a,t),"Create"===i&&await(0,ze.De)(c,o.repoOwner,o.repoName,e,s,n,a,t)}),[Le,c]),Ct=(0,i.useCallback)((async(e,t,s,n)=>{const a=Le;await(0,ze.ok)(c,a.repoOwner,a.repoName,e,t,s,n)}),[Le,c]),yt=(0,i.useCallback)((async()=>{if(void 0===c)return void(0,D.N9)("Please sign in with GitHub!",2e3);const[e,t]=function(e,t,s,n,a,o,i){const r={},l=[];e!==t&&(r[".metadata"]=ve(e)),s!==n&&(r["README.md"]=s);let c=0;for(;c<a.length;){const e=c+1,t="Q"+e;if(e>o.length){r[t+"/StarterCode.js"]=a[c].savedCode,r[t+"/Problem.md"]=a[c].taskDescription;const e=["testCases","testPrepend","testPostpend"];for(const s of e){const e=a[c][s];if(!pe[s].isDefaultValue(e)){const e=t+"/"+pe[s].fileName,n=pe[s].toStringConverter(a[c][s]);r[e]=n}}}else{const e=Object.keys(pe);for(const s of e){const e=a[c][s],n=o[c][s];if(!(0,V.isEqual)(e,n)){const e=t+"/"+pe[s].fileName,n=pe[s].toStringConverter(a[c][s]);r[e]=n}}if(i&&r[t+"/"+pe.savedCode.fileName]){const e=r[t+"/"+pe.savedCode.fileName];delete r[t+"/"+pe.savedCode.fileName],r[t+"/"+pe.starterCode.fileName]=e}}c++}for(;c<o.length;){const e=c+1;l.push("Q"+e),c++}return[r,l]}(C,w,S,_,G,L,he),s=Object.keys(e),n=await c.users.getAuthenticated(),a=n.data.name,o=n.data.email;for(let i=0;i<t.length;i++)await Ct(t[i],a,o,"");for(let i=0;i<s.length;i++){const t=s[i],n=e[t];await ft(t,n,a,o,"")}M(G),O(S),E(C),$(!1),R(!1),T(!1)}),[c,he,S,C,G,L,_,w,ft,Ct]),jt=(0,i.useCallback)((async()=>{if(void 0===c)return void(0,D.N9)("Please sign in with GitHub!",2e3);const e=function(e,t,s){const n={};n[".metadata"]=ve(e),n["README.md"]=t;const a=["testCases","testPrepend","testPostpend"];for(let o=0;o<s.length;o++){const e="Q"+(o+1);n[e+"/"+pe.starterCode.fileName]=s[o].savedCode,n[e+"/"+pe.taskDescription.fileName]=s[o].taskDescription,a.forEach((t=>{const a=s[o][t];if(!pe[t].isDefaultValue(a)){const a=e+"/"+pe[t].fileName,i=pe[t].toStringConverter(s[o][t]);n[a]=i}}))}return n}(C,S,G),t=Object.keys(e).sort(),s=await c.users.getAuthenticated(),n=await(0,Ce.Jt)(ke,(e=>({filesToCreate:t,userLogin:s.data.login,resolveDialog:t=>e(t)})));if(!n.confirmSave)return;const a=s.data.name,o=s.data.email,i=n.repoName,r=s.data.login;try{await c.repos.createForAuthenticatedUser({name:i});for(let s=0;s<t.length;s++){const n=t[s],l=e[n];await(0,ze.De)(c,r,i,n,a,o,"Repository created from Source Academy",l)}M(G),O(S),E(C),$(!1),R(!1),T(!1),Me({repoOwner:r,repoName:i,dateOfCreation:new Date})}catch(l){console.error(l),(0,D.N9)("Something went wrong while creating the repository!",2e3)}}),[S,C,c,G]),wt=(0,i.useCallback)((()=>{void 0!==He&&new Date>He.dueDate?(0,D.N9)("It is past the due date for this assessment!"):void 0!==Le?yt():jt()}),[He,Le,yt,jt]),kt=(0,i.useCallback)((async()=>{await(0,Ce.pG)({contents:(0,A.jsxs)("div",{className:b.DIALOG_BODY,children:[(0,A.jsx)(H.Z,{content:"Are you sure you want to reset the template?"}),(0,A.jsx)(H.Z,{content:"*Note this will not affect the saved copy of your program, unless you save over it.*"})]}),negativeLabel:"Cancel",positiveIntent:"primary",positiveLabel:"Confirm"})&&xt()}),[xt]),Et=(0,i.useCallback)(((e,t,s,n)=>{if(void 0===n)return!0;const a=e-1;return!!(0,V.isEqual)(t[a],s[a])||window.confirm("You have unsaved changes to the current question. Are you sure you want to continue?")}),[]),Nt=(0,i.useCallback)((()=>{if(Et(de,G,L,Le)){let e=G;void 0!==Le&&(e=L.map((e=>Object.assign({},e))),ut(e));lt(de-1,e)}}),[de,G,L,Le,ut,Et,lt]),Tt=(0,i.useCallback)((()=>{if(Et(de,G,L,Le)){let e=G;void 0!==Le&&(e=L.map((e=>Object.assign({},e))),ut(e));lt(de+1,e)}}),[de,G,L,Le,ut,Et,lt]),At=(0,i.useCallback)((()=>{e("/githubassessments/missions")}),[e]);(0,i.useEffect)((()=>{qe||Fe!==We.B_.mobileEditor&&Fe!==We.B_.mobileEditorRun||Ve(We.B_.questionOverview)}),[qe,Fe,Ve]);const St=(0,i.useCallback)(((e,t)=>{m(0,t),vt(de,t)}),[de,vt,m]),Pt=(e,t,s)=>{e!==t&&Ve(e)},_t=(0,i.useRef)(Fe);_t.current=Fe;const Ot=()=>{u(),_t.current===We.B_.testcases&&t((0,W.runAllTestcases)(et))},Dt=(0,i.useCallback)((e=>{const t=[];for(let s=0;s<G.length;s++){const n=Object.assign({},G[s]);n.taskDescription=e[s],t.push(n)}ut(t)}),[G,ut]),It=(0,i.useCallback)((e=>{const t=G.map((e=>Object.assign({},e)));t[de-1]={...t[de-1],testCases:e},v({editorTestcases:t[de-1].testCases}),ut(t)}),[de,G,v,ut]),Bt=(0,i.useCallback)((e=>{const t=G.map((e=>Object.assign({},e)));t[de-1]={...t[de-1],testPrepend:e},ut(t)}),[de,G,ut]),Rt=(0,i.useCallback)((e=>{const t=G.map((e=>Object.assign({},e)));t[de-1]={...t[de-1],testPostpend:e},ut(t)}),[de,G,ut]),Lt=()=>{const e=[{label:"Task",iconName:o.d.NINJA,body:(0,A.jsx)(Pe,{allowEdits:he,currentTaskNumber:de,taskDescriptions:G.map((e=>e.taskDescription)),setTaskDescriptions:Dt}),id:We.B_.questionOverview},{label:"Briefing",iconName:o.d.BRIEFCASE,body:(0,A.jsx)(Te,{allowEdits:he,content:S,setContent:ct}),id:We.B_.briefing}],s=de-1,n=G[s]?G[s].testPrepend:"",a=G[s]?G[s].testPostpend:"";return e.push({label:"Testcases",iconName:o.d.AIRPLANE,body:(0,A.jsx)(Ze,{allowEdits:he,testcases:nt,testPrepend:n,testPostpend:a,setTaskTestcases:It,setTestPrepend:Bt,setTestPostpend:Rt,handleTestcaseEval:e=>t((0,W.evalTestcase)(et,e))}),id:We.B_.testcases}),he&&e.push({label:"Mission Metadata",iconName:o.d.BUILD,body:(0,A.jsx)(Se,{isFolderModeEnabled:$e,missionMetadata:C,setMissionMetadata:dt}),id:We.B_.missionMetadata}),{selectedTabId:Fe,tabs:{beforeDynamicTabs:e,afterDynamicTabs:[]},onChange:Pt,workspaceLocation:et}},Mt=()=>{const e=G.slice(0,de).concat([Ke]).concat(G.slice(de,G.length));ut(e);lt(de+1,e)},Ht=()=>{const e=de-1,t=G.slice(0,e).concat(G.slice(de,G.length));ut(t);lt(1===de?de:de-1,t)},Gt=()=>{const e=(0,A.jsx)(re.h,{isEntrypointFileDefined:null!==tt,handleEditorEval:Ot},"run"),t=(0,A.jsx)(le.t,{hasUnsavedChanges:at,onClickSave:wt},"save"),s=(0,A.jsx)(ie.A,{onClick:kt},"reset"),n=(0,A.jsx)(ee.b,{handleChapterSelect:()=>{},isFolderModeEnabled:$e,sourceChapter:C.sourceVersion,sourceVariant:Ae.Z.defaultSourceVariant,disabled:!0},"chapter"),a=(0,A.jsx)(ne.g,{onClickNext:Tt,onClickReturn:At,questionProgress:[de,G.length]},"next_question"),o=(0,A.jsx)(ae.f,{onClick:Nt,questionProgress:[de,G.length]},"previous_question"),i=(0,A.jsx)(oe.M,{questionProgress:[de,G.length]},"task_view"),r=qe?[t,s]:[e,t,s,n];if(he){const e=(0,A.jsx)(fe,{addNewQuestion:Mt,numberOfTasks:G.length},"add_task"),t=(0,A.jsx)(ye,{deleteCurrentQuestion:Ht,numberOfTasks:G.length},"delete_task"),s=(0,A.jsx)(ce,{displayMCQInEditor:()=>mt(!0),displayTextInEditor:()=>mt(!1),mcqDisplayed:De},"display MCQ");r.push(e,t,s)}return{editorButtons:r,flowButtons:[o,i,a]}},Ut=(0,i.useCallback)((e=>{if(!_e)return;const t=Object.assign({},Be);t.answer=e,Re(t),vt(de,function(e){const t=e.answer,s=e.choices.map((e=>({option:e.content,hint:e.hint}))),n=e.solution;return"MCQ\n"+me({choices:s,answer:t,solution:n})}(t))}),[_e,de,vt,Be]),Ft=(0,i.useMemo)((()=>_e&&De?{mcq:Be,handleMCQSubmit:Ut}:void 0),[_e,De,Be,Ut]),Vt={editorVariant:"normal",isFolderModeEnabled:$e,activeEditorTabIndex:tt,setActiveEditorTabIndex:x,removeEditorTabByIndex:f,editorTabs:st.map(je.F),editorSessionId:"",handleDeclarationNavigate:e=>t((0,W.navigateToDeclaration)(et,e)),handleEditorEval:Ot,handleEditorValueChange:St,handleUpdateHasUnsavedChanges:g,handleEditorUpdateBreakpoints:(e,s)=>t((0,W.setEditorBreakpoint)(et,e,s)),handlePromptAutocomplete:(e,s,n)=>t((0,W.promptAutocomplete)(et,e,s,n)),isEditorAutorun:!1},qt={handleBrowseHistoryDown:()=>t((0,W.browseReplHistoryDown)(et)),handleBrowseHistoryUp:()=>t((0,W.browseReplHistoryUp)(et)),handleReplEval:h,handleReplValueChange:e=>t((0,W.updateReplValue)(e,et)),output:it,replValue:rt,sourceChapter:C.sourceVersion||F.Chapter.SOURCE_4,sourceVariant:F.Variant.DEFAULT,externalLibrary:X.L.NONE,replButtons:(()=>{const e=(0,A.jsx)(te._,{handleReplOutputClear:p},"clear_repl");return[(0,A.jsx)(se.e,{handleReplEval:h,isRunning:ot},"eval_repl"),e]})()},Zt={tabs:[]},Wt={controlBarProps:Gt(),editorContainerProps:_e&&De?void 0:Vt,handleSideContentHeightChange:e=>t((0,q.changeSideContentHeight)(e,et)),hasUnsavedChanges:at,mcqProps:Ft,sideBarProps:Zt,sideContentProps:Lt(),replProps:qt},Qt={editorContainerProps:_e&&De?void 0:Vt,replProps:qt,sideBarProps:Zt,hasUnsavedChanges:at,mcqProps:Ft,mobileSideContentProps:(()=>{const e=Lt();return{mobileControlBarProps:{...Gt()},...e,onChange:(e,t,s)=>{e!==t&&(t===We.B_.testcases&&e===We.B_.mobileEditorRun||Ve(e))},selectedTabId:Fe,handleEditorEval:Ot}})()};return we?(0,A.jsx)("div",{className:k()(z,b.DARK),children:(0,A.jsx)(n.t,{description:"Loading",icon:(0,A.jsx)(a.$,{size:a.E.LARGE})})}):(0,A.jsxs)("div",{className:k()("WorkspaceParent",b.DARK),children:[bt,qe?(0,A.jsx)(Ee.Z,{...Qt}):(0,A.jsx)(Qe.Z,{...Wt})]})},st=()=>(0,A.jsx)("div",{className:"github-welcome",children:(0,A.jsx)(I.Z,{className:"github-welcome-content",children:(0,A.jsx)("div",{style:{marginTop:"20px",display:"flex",justifyContent:"center"},children:(0,A.jsxs)("div",{children:[(0,A.jsx)(L.H2,{children:"Welcome to Source Academy with GitHub Classroom!"}),(0,A.jsx)("br",{}),(0,A.jsx)(L.H4,{children:"Source Academy does not find any course information for this account."}),(0,A.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,A.jsxs)(L.UL,{style:{textAlign:"justify"},children:[(0,A.jsx)("li",{children:"If you are enrolled in a Source Academy course that uses GitHub Classroom, check with the course staff to make sure your account is added to the course."}),(0,A.jsxs)("li",{children:["If you are looking for a course to join, check"," ",(0,A.jsx)("a",{href:"https://about.sourceacademy.org/learner/README.html",children:"here"})," to find a course that suits your needs."]})]})})]})})})});var nt=s(19778).Buffer;const at={GITHUB_LOGIN:"login",GITHUB_WELCOME:"welcome",GITHUB_EDITOR:"editor",getAssessmentTypeLink:P.q1},ot=()=>{const e=(0,l.TH)().state,t=(0,d.ix)((e=>e.session.githubOctokitObject)).octokit,s=(0,r.I0)(),[h,p]=(0,i.useState)(null===e||void 0===e?void 0:e.courses),[g,b]=(0,i.useState)((null===e||void 0===e?void 0:e.selectedCourse)||""),[v,x]=(0,i.useState)(null===e||void 0===e?void 0:e.assessmentTypeOverviews),f=null===v||void 0===v?void 0:v.map((e=>e.typeName));(0,i.useEffect)((()=>{void 0!==t&&(h||async function(e,t,s,n){const a=[],o=(await e.orgs.listForAuthenticatedUser({per_page:100})).data;o.filter((e=>e.login.includes("source-academy-course"))).forEach((e=>{a.push(e.login.replace("source-academy-course-",""))})),t(a),a.length>0&&(s(a[0]),it(e,a[0],n))}(t,p,b,x))}),[h,t]);const C=i.useCallback((e=>{void 0!==t&&(it(t,e.target.innerText,x),b(e.target.innerText))}),[t,b,x]),y=()=>{void 0!==t&&it(t,g,x)},j=(0,A.jsx)(l.Fg,{to:at.GITHUB_LOGIN,replace:!0}),w=(0,A.jsx)(l.Fg,{to:`${at.getAssessmentTypeLink(f?f[0]:at.GITHUB_WELCOME)}`,state:{courses:h,assessmentTypeOverviews:v,selectedCourse:g},replace:!0});return(0,A.jsxs)("div",{className:u.Z.Academy,style:{overflow:"hidden"},children:[(0,A.jsx)(O,{changeCourseHandler:C,handleGitHubLogIn:()=>s((0,c.loginGitHub)()),handleGitHubLogOut:()=>{s((0,c.logoutGitHub)()),p(void 0),x(void 0),b("")},octokit:t,courses:h,selectedCourse:g,types:f,assessmentTypeOverviews:v}),(0,A.jsxs)(l.Z5,{children:[(0,A.jsx)(l.AW,{path:at.GITHUB_LOGIN,element:t&&(!h||h.length>0&&!v)?(0,A.jsx)(m.Z,{display:(0,A.jsx)(n.t,{description:"Loading...",icon:(0,A.jsx)(a.$,{})}),loadContentDispatch:()=>{}}):t&&h&&0===h.length?(0,A.jsx)(l.Fg,{to:at.GITHUB_WELCOME,replace:!0}):t?w:(0,A.jsx)(m.Z,{display:(0,A.jsx)(n.t,{description:"Please sign in to GitHub.",icon:o.d.WARNING_SIGN}),loadContentDispatch:()=>{}})}),(0,A.jsx)(l.AW,{path:at.GITHUB_WELCOME,element:t?(0,A.jsx)(st,{}):j}),(0,A.jsx)(l.AW,{path:at.GITHUB_EDITOR,element:(0,A.jsx)(tt,{})}),t?null===f||void 0===f?void 0:f.map(((e,t)=>{const s=v?v[t].assessments:void 0;return(0,A.jsx)(l.AW,{path:`${at.getAssessmentTypeLink(e)}`,element:(0,A.jsx)(G,{assessmentOverviews:s,refreshAssessmentOverviews:y})},t)})):null,(0,A.jsx)(l.AW,{path:"*",element:t&&h&&h.length>0?w:j})]})]})};async function it(e,t,s){const n=(await e.users.getAuthenticated()).data.login,a="source-academy-course-".concat(t),o=(await e.repos.listForAuthenticatedUser({per_page:100})).data,i=o.filter((e=>e.owner.login===a)).find((e=>e.name.includes("course-info")));if(void 0===i)return void(0,D.N9)("The course-info repository cannot be located.",2e3);const r=(await e.repos.getContent({owner:i.owner.login,repo:i.name,path:""})).data;if(Array.isArray(r)){if(!r.find((e=>"course-info.json"===e.name)))return void(0,D.N9)("The course-info.json file cannot be located.",2e3);{const t=await e.repos.getContent({owner:i.owner.login,repo:i.name,path:"course-info.json"}),a=JSON.parse(nt.from(t.data.content,"base64").toString());a.types.forEach((e=>{const t=[];e.assessments.forEach((e=>{if(!e.published)return;const s=e.repoPrefix+"-"+n,a=o.find((e=>e.name===s));let r,l=new Date;void 0===a?r=e.acceptLink:null!==a.created_at&&(l=new Date(a.created_at)),t.push({title:e.title,coverImage:e.coverImage,webSummary:e.shortSummary,missionRepoData:{repoOwner:i.owner.login,repoName:s,dateOfCreation:l},dueDate:new Date(e.closeAt),link:r}),t.sort(((e,t)=>e.dueDate<=t.dueDate?-1:1))})),e.assessments=t})),s(a.types)}}}const rt=ot;rt.displayName="GitHubClassroom";const lt=ot},34957:(e,t,s)=>{s.d(t,{Z:()=>n});const n={Application__main:"Academy_Application__main__WbAGW",WorkspaceParent:"Academy_WorkspaceParent__QkrJ0","bp5-tag":"Academy_bp5-tag__qdxCt",badge:"Academy_badge__T8ws1","bp5-overlay":"Academy_bp5-overlay__NG6bM","bp5-popover-content":"Academy_bp5-popover-content__D5ZSM","badge-tag":"Academy_badge-tag__A0vj4",Academy:"Academy_Academy__1mjfJ","Academy-switching-courses":"Academy_Academy-switching-courses__aaVIr"}},5602:(e,t,s)=>{e.exports=s.p+"static/media/default_cover_image.e2be07249bb127696687.jpg"}}]);
//# sourceMappingURL=32072.27742caf.chunk.js.map